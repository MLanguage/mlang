<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mlang__Mir (mlang.Mlang__Mir)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">mlang</a> &#x00BB; Mlang__Mir</nav><h1>Module <code>Mlang__Mir</code></h1></header><dl><dt class="spec type" id="type-execution_number"><a href="#type-execution_number" class="anchor"></a><code><span class="keyword">type</span> execution_number</code><code> = </code><code>{</code><table class="record"><tr id="type-execution_number.rule_number" class="anchored"><td class="def field"><a href="#type-execution_number.rule_number" class="anchor"></a><code>rule_number : int;</code></td><td class="doc"><p>Written in the name of the rule or verification condition</p></td></tr><tr id="type-execution_number.seq_number" class="anchored"><td class="def field"><a href="#type-execution_number.seq_number" class="anchor"></a><code>seq_number : int;</code></td><td class="doc"><p>Index in the sequence of the definitions in the rule</p></td></tr><tr id="type-execution_number.pos" class="anchored"><td class="def field"><a href="#type-execution_number.pos" class="anchor"></a><code>pos : <a href="../Mlang/Pos/index.html#type-t">Mlang.Pos.t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-max_result"><a href="#type-max_result" class="anchor"></a><code><span class="keyword">type</span> max_result</code><code> = </code><table class="variant"><tr id="type-max_result.Left" class="anchored"><td class="def constructor"><a href="#type-max_result.Left" class="anchor"></a><code>| </code><code><span class="constructor">Left</span></code></td></tr><tr id="type-max_result.Right" class="anchored"><td class="def constructor"><a href="#type-max_result.Right" class="anchor"></a><code>| </code><code><span class="constructor">Right</span></code></td><td class="doc"><p>Operator used to select the most preferable variable to choose</p></td></tr></table></dt><dt class="spec type" id="type-variable_id"><a href="#type-variable_id" class="anchor"></a><code><span class="keyword">type</span> variable_id</code><code> = int</code></dt><dd><p>Each variable has an unique ID</p></dd></dl><dl><dt class="spec type" id="type-variable"><a href="#type-variable" class="anchor"></a><code><span class="keyword">type</span> variable</code><code> = </code><code>{</code><table class="record"><tr id="type-variable.name" class="anchored"><td class="def field"><a href="#type-variable.name" class="anchor"></a><code>name : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td><td class="doc"><p>The position is the variable declaration</p></td></tr><tr id="type-variable.execution_number" class="anchored"><td class="def field"><a href="#type-variable.execution_number" class="anchor"></a><code>execution_number : <a href="index.html#type-execution_number">execution_number</a>;</code></td><td class="doc"><p>The number associated with the rule of verification condition in which the variable is defined</p></td></tr><tr id="type-variable.alias" class="anchored"><td class="def field"><a href="#type-variable.alias" class="anchor"></a><code>alias : <span>string option</span>;</code></td><td class="doc"><p>Input variable have an alias</p></td></tr><tr id="type-variable.id" class="anchored"><td class="def field"><a href="#type-variable.id" class="anchor"></a><code>id : <a href="index.html#type-variable_id">variable_id</a>;</code></td></tr><tr id="type-variable.descr" class="anchored"><td class="def field"><a href="#type-variable.descr" class="anchor"></a><code>descr : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td><td class="doc"><p>Description taken from the variable declaration</p></td></tr><tr id="type-variable.attributes" class="anchored"><td class="def field"><a href="#type-variable.attributes" class="anchor"></a><code>attributes : <span><span>(<span><a href="../Mlang/Mast/index.html#type-input_variable_attribute">Mlang.Mast.input_variable_attribute</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><a href="../Mlang/Mast/index.html#type-literal">Mlang.Mast.literal</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>)</span> list</span>;</code></td></tr><tr id="type-variable.origin" class="anchored"><td class="def field"><a href="#type-variable.origin" class="anchor"></a><code>origin : <span><a href="index.html#type-variable">variable</a> option</span>;</code></td><td class="doc"><p>If the variable is an SSA duplication, refers to the original (declared) variable</p></td></tr><tr id="type-variable.is_income" class="anchored"><td class="def field"><a href="#type-variable.is_income" class="anchor"></a><code>is_income : bool;</code></td></tr><tr id="type-variable.is_table" class="anchored"><td class="def field"><a href="#type-variable.is_table" class="anchor"></a><code>is_table : <span>int option</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-local_variable"><a href="#type-local_variable" class="anchor"></a><code><span class="keyword">type</span> local_variable</code><code> = </code><code>{</code><table class="record"><tr id="type-local_variable.id" class="anchored"><td class="def field"><a href="#type-local_variable.id" class="anchor"></a><code>id : int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> typ</code><code> = </code><table class="variant"><tr id="type-typ.Real" class="anchored"><td class="def constructor"><a href="#type-typ.Real" class="anchor"></a><code>| </code><code><span class="constructor">Real</span></code></td></tr></table></dt><dd><p>Type of MIR values</p></dd></dl><dl><dt class="spec type" id="type-literal"><a href="#type-literal" class="anchor"></a><code><span class="keyword">type</span> literal</code><code> = </code><table class="variant"><tr id="type-literal.Float" class="anchored"><td class="def constructor"><a href="#type-literal.Float" class="anchor"></a><code>| </code><code><span class="constructor">Float</span> <span class="keyword">of</span> float</code></td></tr><tr id="type-literal.Undefined" class="anchored"><td class="def constructor"><a href="#type-literal.Undefined" class="anchor"></a><code>| </code><code><span class="constructor">Undefined</span></code></td></tr></table></dt><dt class="spec type" id="type-func"><a href="#type-func" class="anchor"></a><code><span class="keyword">type</span> func</code><code> = </code><table class="variant"><tr id="type-func.SumFunc" class="anchored"><td class="def constructor"><a href="#type-func.SumFunc" class="anchor"></a><code>| </code><code><span class="constructor">SumFunc</span></code></td><td class="doc"><p>Sums the arguments</p></td></tr><tr id="type-func.AbsFunc" class="anchored"><td class="def constructor"><a href="#type-func.AbsFunc" class="anchor"></a><code>| </code><code><span class="constructor">AbsFunc</span></code></td><td class="doc"><p>Absolute value</p></td></tr><tr id="type-func.MinFunc" class="anchored"><td class="def constructor"><a href="#type-func.MinFunc" class="anchor"></a><code>| </code><code><span class="constructor">MinFunc</span></code></td><td class="doc"><p>Minimum of a list of values</p></td></tr><tr id="type-func.MaxFunc" class="anchored"><td class="def constructor"><a href="#type-func.MaxFunc" class="anchor"></a><code>| </code><code><span class="constructor">MaxFunc</span></code></td><td class="doc"><p>Maximum of a list of values</p></td></tr><tr id="type-func.GtzFunc" class="anchored"><td class="def constructor"><a href="#type-func.GtzFunc" class="anchor"></a><code>| </code><code><span class="constructor">GtzFunc</span></code></td><td class="doc"><p>Greater than zero (strict) ?</p></td></tr><tr id="type-func.GtezFunc" class="anchored"><td class="def constructor"><a href="#type-func.GtezFunc" class="anchor"></a><code>| </code><code><span class="constructor">GtezFunc</span></code></td><td class="doc"><p>Greater or equal than zero ?</p></td></tr><tr id="type-func.NullFunc" class="anchored"><td class="def constructor"><a href="#type-func.NullFunc" class="anchor"></a><code>| </code><code><span class="constructor">NullFunc</span></code></td><td class="doc"><p>Equal to zero ?</p></td></tr><tr id="type-func.ArrFunc" class="anchored"><td class="def constructor"><a href="#type-func.ArrFunc" class="anchor"></a><code>| </code><code><span class="constructor">ArrFunc</span></code></td><td class="doc"><p>Round to nearest integer</p></td></tr><tr id="type-func.InfFunc" class="anchored"><td class="def constructor"><a href="#type-func.InfFunc" class="anchor"></a><code>| </code><code><span class="constructor">InfFunc</span></code></td><td class="doc"><p>Truncate to integer</p></td></tr><tr id="type-func.PresentFunc" class="anchored"><td class="def constructor"><a href="#type-func.PresentFunc" class="anchor"></a><code>| </code><code><span class="constructor">PresentFunc</span></code></td><td class="doc"><p>Different than zero ?</p></td></tr><tr id="type-func.Multimax" class="anchored"><td class="def constructor"><a href="#type-func.Multimax" class="anchor"></a><code>| </code><code><span class="constructor">Multimax</span></code></td><td class="doc"><p>???</p></td></tr><tr id="type-func.Supzero" class="anchored"><td class="def constructor"><a href="#type-func.Supzero" class="anchor"></a><code>| </code><code><span class="constructor">Supzero</span></code></td><td class="doc"><p>???</p></td></tr></table></dt><dd><p>MIR only supports a restricted set of functions</p></dd></dl><aside><p>MIR expressions are simpler than M; there are no loops or syntaxtic sugars. Because M lets you define conditional without an else branch although it is an expression-based language, we include an <code>Error</code> constructor to which the missing else branch is translated to.</p><p>Because translating to MIR requires a lot of unrolling and expansion, we introduce a <code>LocalLet</code> construct to avoid code duplication.</p></aside><dl><dt class="spec type" id="type-expression_"><a href="#type-expression_" class="anchor"></a><code><span class="keyword">type</span> <span>'variable expression_</span></code><code> = </code><table class="variant"><tr id="type-expression_.Unop" class="anchored"><td class="def constructor"><a href="#type-expression_.Unop" class="anchor"></a><code>| </code><code><span class="constructor">Unop</span> <span class="keyword">of</span> <a href="../Mlang/Mast/index.html#type-unop">Mlang.Mast.unop</a> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-expression_.Comparison" class="anchored"><td class="def constructor"><a href="#type-expression_.Comparison" class="anchor"></a><code>| </code><code><span class="constructor">Comparison</span> <span class="keyword">of</span> <span><a href="../Mlang/Mast/index.html#type-comp_op">Mlang.Mast.comp_op</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-expression_.Binop" class="anchored"><td class="def constructor"><a href="#type-expression_.Binop" class="anchor"></a><code>| </code><code><span class="constructor">Binop</span> <span class="keyword">of</span> <span><a href="../Mlang/Mast/index.html#type-binop">Mlang.Mast.binop</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-expression_.Index" class="anchored"><td class="def constructor"><a href="#type-expression_.Index" class="anchor"></a><code>| </code><code><span class="constructor">Index</span> <span class="keyword">of</span> <span><span class="type-var">'variable</span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-expression_.Conditional" class="anchored"><td class="def constructor"><a href="#type-expression_.Conditional" class="anchor"></a><code>| </code><code><span class="constructor">Conditional</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-expression_.FunctionCall" class="anchored"><td class="def constructor"><a href="#type-expression_.FunctionCall" class="anchor"></a><code>| </code><code><span class="constructor">FunctionCall</span> <span class="keyword">of</span> <a href="index.html#type-func">func</a> * <span><span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> list</span></code></td></tr><tr id="type-expression_.Literal" class="anchored"><td class="def constructor"><a href="#type-expression_.Literal" class="anchor"></a><code>| </code><code><span class="constructor">Literal</span> <span class="keyword">of</span> <a href="index.html#type-literal">literal</a></code></td></tr><tr id="type-expression_.Var" class="anchored"><td class="def constructor"><a href="#type-expression_.Var" class="anchor"></a><code>| </code><code><span class="constructor">Var</span> <span class="keyword">of</span> <span class="type-var">'variable</span></code></td></tr><tr id="type-expression_.LocalVar" class="anchored"><td class="def constructor"><a href="#type-expression_.LocalVar" class="anchor"></a><code>| </code><code><span class="constructor">LocalVar</span> <span class="keyword">of</span> <a href="index.html#type-local_variable">local_variable</a></code></td></tr><tr id="type-expression_.GenericTableIndex" class="anchored"><td class="def constructor"><a href="#type-expression_.GenericTableIndex" class="anchor"></a><code>| </code><code><span class="constructor">GenericTableIndex</span></code></td></tr><tr id="type-expression_.Error" class="anchored"><td class="def constructor"><a href="#type-expression_.Error" class="anchor"></a><code>| </code><code><span class="constructor">Error</span></code></td></tr><tr id="type-expression_.LocalLet" class="anchored"><td class="def constructor"><a href="#type-expression_.LocalLet" class="anchor"></a><code>| </code><code><span class="constructor">LocalLet</span> <span class="keyword">of</span> <a href="index.html#type-local_variable">local_variable</a> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr></table></dt><dt class="spec type" id="type-expression"><a href="#type-expression" class="anchor"></a><code><span class="keyword">type</span> expression</code><code> = <span><a href="index.html#type-variable">variable</a> <a href="index.html#type-expression_">expression_</a></span></code></dt></dl><dl><dt class="spec module" id="module-VariableMap"><a href="#module-VariableMap" class="anchor"></a><code><span class="keyword">module</span> <a href="VariableMap/index.html">VariableMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>MIR programs are just mapping from variables to their definitions, and make a massive use of <code>VariableMap</code>.</p></dd></dl><div class="spec module" id="module-VariableDictMap"><a href="#module-VariableDictMap" class="anchor"></a><code><span class="keyword">module</span> VariableDictMap : Stdlib.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-VariableDictMap">VariableDictMap</a>.key = <a href="index.html#type-variable_id">variable_id</a></code></div><dl><dt class="spec type" id="type-variable_dict"><a href="#type-variable_dict" class="anchor"></a><code><span class="keyword">type</span> variable_dict</code><code> = <span><a href="index.html#type-variable">variable</a> <a href="index.html#module-VariableDictMap">VariableDictMap</a>.t</span></code></dt></dl><div class="spec module" id="module-VariableSet"><a href="#module-VariableSet" class="anchor"></a><code><span class="keyword">module</span> VariableSet : Stdlib.Set.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-VariableSet">VariableSet</a>.elt = <a href="index.html#type-variable">variable</a></code></div><div class="spec module" id="module-LocalVariableMap"><a href="#module-LocalVariableMap" class="anchor"></a><code><span class="keyword">module</span> <a href="LocalVariableMap/index.html">LocalVariableMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-IndexMap"><a href="#module-IndexMap" class="anchor"></a><code><span class="keyword">module</span> <a href="IndexMap/index.html">IndexMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-index_def"><a href="#type-index_def" class="anchor"></a><code><span class="keyword">type</span> <span>'variable index_def</span></code><code> = </code><table class="variant"><tr id="type-index_def.IndexTable" class="anchored"><td class="def constructor"><a href="#type-index_def.IndexTable" class="anchor"></a><code>| </code><code><span class="constructor">IndexTable</span> <span class="keyword">of</span> <span><span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> <a href="index.html#module-IndexMap">IndexMap</a>.t</span></code></td></tr><tr id="type-index_def.IndexGeneric" class="anchored"><td class="def constructor"><a href="#type-index_def.IndexGeneric" class="anchor"></a><code>| </code><code><span class="constructor">IndexGeneric</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr></table></dt><dt class="spec type" id="type-variable_def_"><a href="#type-variable_def_" class="anchor"></a><code><span class="keyword">type</span> <span>'variable variable_def_</span></code><code> = </code><table class="variant"><tr id="type-variable_def_.SimpleVar" class="anchored"><td class="def constructor"><a href="#type-variable_def_.SimpleVar" class="anchor"></a><code>| </code><code><span class="constructor">SimpleVar</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span></code></td></tr><tr id="type-variable_def_.TableVar" class="anchored"><td class="def constructor"><a href="#type-variable_def_.TableVar" class="anchor"></a><code>| </code><code><span class="constructor">TableVar</span> <span class="keyword">of</span> int * <span><span class="type-var">'variable</span> <a href="index.html#type-index_def">index_def</a></span></code></td></tr><tr id="type-variable_def_.InputVar" class="anchored"><td class="def constructor"><a href="#type-variable_def_.InputVar" class="anchor"></a><code>| </code><code><span class="constructor">InputVar</span></code></td></tr></table></dt><dt class="spec type" id="type-variable_def"><a href="#type-variable_def" class="anchor"></a><code><span class="keyword">type</span> variable_def</code><code> = <span><a href="index.html#type-variable">variable</a> <a href="index.html#type-variable_def_">variable_def_</a></span></code></dt><dt class="spec type" id="type-io"><a href="#type-io" class="anchor"></a><code><span class="keyword">type</span> io</code><code> = </code><table class="variant"><tr id="type-io.Input" class="anchored"><td class="def constructor"><a href="#type-io.Input" class="anchor"></a><code>| </code><code><span class="constructor">Input</span></code></td></tr><tr id="type-io.Output" class="anchored"><td class="def constructor"><a href="#type-io.Output" class="anchor"></a><code>| </code><code><span class="constructor">Output</span></code></td></tr><tr id="type-io.Regular" class="anchored"><td class="def constructor"><a href="#type-io.Regular" class="anchor"></a><code>| </code><code><span class="constructor">Regular</span></code></td></tr></table></dt><dt class="spec type" id="type-variable_data_"><a href="#type-variable_data_" class="anchor"></a><code><span class="keyword">type</span> <span>'variable variable_data_</span></code><code> = </code><code>{</code><table class="record"><tr id="type-variable_data_.var_definition" class="anchored"><td class="def field"><a href="#type-variable_data_.var_definition" class="anchor"></a><code>var_definition : <span><span class="type-var">'variable</span> <a href="index.html#type-variable_def_">variable_def_</a></span>;</code></td></tr><tr id="type-variable_data_.var_typ" class="anchored"><td class="def field"><a href="#type-variable_data_.var_typ" class="anchor"></a><code>var_typ : <span><a href="index.html#type-typ">typ</a> option</span>;</code></td><td class="doc"><p>The typing info here comes from the variable declaration in the source program</p></td></tr><tr id="type-variable_data_.var_io" class="anchored"><td class="def field"><a href="#type-variable_data_.var_io" class="anchor"></a><code>var_io : <a href="index.html#type-io">io</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-variable_data"><a href="#type-variable_data" class="anchor"></a><code><span class="keyword">type</span> variable_data</code><code> = <span><a href="index.html#type-variable">variable</a> <a href="index.html#type-variable_data_">variable_data_</a></span></code></dt><dt class="spec type" id="type-rule_data"><a href="#type-rule_data" class="anchor"></a><code><span class="keyword">type</span> rule_data</code><code> = </code><code>{</code><table class="record"><tr id="type-rule_data.rule_vars" class="anchored"><td class="def field"><a href="#type-rule_data.rule_vars" class="anchor"></a><code>rule_vars : <span><span>(<a href="index.html#type-variable_id">variable_id</a> * <a href="index.html#type-variable_data">variable_data</a>)</span> list</span>;</code></td></tr><tr id="type-rule_data.rule_number" class="anchored"><td class="def field"><a href="#type-rule_data.rule_number" class="anchor"></a><code>rule_number : <span>int <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-rule_data.rule_tags" class="anchored"><td class="def field"><a href="#type-rule_data.rule_tags" class="anchor"></a><code>rule_tags : <span><a href="../Mlang/Mast/index.html#type-chain_tag">Mlang.Mast.chain_tag</a> list</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-rule_id"><a href="#type-rule_id" class="anchor"></a><code><span class="keyword">type</span> rule_id</code><code> = int</code></dt></dl><div class="spec module" id="module-RuleMap"><a href="#module-RuleMap" class="anchor"></a><code><span class="keyword">module</span> RuleMap : Stdlib.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-RuleMap">RuleMap</a>.key = <a href="index.html#type-rule_id">rule_id</a></code></div><div class="spec module" id="module-TagMap"><a href="#module-TagMap" class="anchor"></a><code><span class="keyword">module</span> TagMap : Stdlib.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-TagMap">TagMap</a>.key = <a href="../Mlang/Mast/index.html#type-chain_tag">Mlang.Mast.chain_tag</a></code></div><dl><dt class="spec type" id="type-error_descr"><a href="#type-error_descr" class="anchor"></a><code><span class="keyword">type</span> error_descr</code><code> = </code><code>{</code><table class="record"><tr id="type-error_descr.kind" class="anchored"><td class="def field"><a href="#type-error_descr.kind" class="anchor"></a><code>kind : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-error_descr.major_code" class="anchored"><td class="def field"><a href="#type-error_descr.major_code" class="anchor"></a><code>major_code : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-error_descr.minor_code" class="anchored"><td class="def field"><a href="#type-error_descr.minor_code" class="anchor"></a><code>minor_code : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-error_descr.description" class="anchored"><td class="def field"><a href="#type-error_descr.description" class="anchor"></a><code>description : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-error_descr.isisf" class="anchored"><td class="def field"><a href="#type-error_descr.isisf" class="anchor"></a><code>isisf : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr></table><code>}</code></dt><dd><p>Errors are first-class objects</p></dd></dl><dl><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code><code> = </code><code>{</code><table class="record"><tr id="type-error.name" class="anchored"><td class="def field"><a href="#type-error.name" class="anchor"></a><code>name : <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td><td class="doc"><p>The position is the variable declaration</p></td></tr><tr id="type-error.id" class="anchored"><td class="def field"><a href="#type-error.id" class="anchor"></a><code>id : int;</code></td><td class="doc"><p>Each variable has an unique ID</p></td></tr><tr id="type-error.descr" class="anchored"><td class="def field"><a href="#type-error.descr" class="anchor"></a><code>descr : <a href="index.html#type-error_descr">error_descr</a>;</code></td><td class="doc"><p>Description taken from the variable declaration</p></td></tr><tr id="type-error.typ" class="anchored"><td class="def field"><a href="#type-error.typ" class="anchor"></a><code>typ : <a href="../Mlang/Mast/index.html#type-error_typ">Mlang.Mast.error_typ</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-condition_data_"><a href="#type-condition_data_" class="anchor"></a><code><span class="keyword">type</span> <span>'variable condition_data_</span></code><code> = </code><code>{</code><table class="record"><tr id="type-condition_data_.cond_expr" class="anchored"><td class="def field"><a href="#type-condition_data_.cond_expr" class="anchor"></a><code>cond_expr : <span><span><span class="type-var">'variable</span> <a href="index.html#type-expression_">expression_</a></span> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span>;</code></td></tr><tr id="type-condition_data_.cond_error" class="anchored"><td class="def field"><a href="#type-condition_data_.cond_error" class="anchor"></a><code>cond_error : <a href="index.html#type-error">error</a> * <span><span class="type-var">'variable</span> option</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-condition_data"><a href="#type-condition_data" class="anchor"></a><code><span class="keyword">type</span> condition_data</code><code> = <span><a href="index.html#type-variable">variable</a> <a href="index.html#type-condition_data_">condition_data_</a></span></code></dt><dt class="spec type" id="type-idmap"><a href="#type-idmap" class="anchor"></a><code><span class="keyword">type</span> idmap</code><code> = <span><span><a href="index.html#type-variable">variable</a> list</span> <a href="../Mlang__Pos/index.html#module-VarNameToID">Mlang.Pos.VarNameToID</a>.t</span></code></dt><dd><p>We translate string variables into first-class unique <span class="xref-unresolved" title="unresolved reference to &quot;Mir.variable&quot;"><code>Mir</code>.variable</span>, so we need to keep a mapping between the two. A name is mapped to a list of variables because variables can be redefined in different rules</p></dd></dl><dl><dt class="spec type" id="type-exec_pass"><a href="#type-exec_pass" class="anchor"></a><code><span class="keyword">type</span> exec_pass</code><code> = </code><code>{</code><table class="record"><tr id="type-exec_pass.exec_pass_set_variables" class="anchored"><td class="def field"><a href="#type-exec_pass.exec_pass_set_variables" class="anchor"></a><code>exec_pass_set_variables : <span><span><a href="index.html#type-literal">literal</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> <a href="index.html#module-VariableMap">VariableMap</a>.t</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-program"><a href="#type-program" class="anchor"></a><code><span class="keyword">type</span> program</code><code> = </code><code>{</code><table class="record"><tr id="type-program.program_vars" class="anchored"><td class="def field"><a href="#type-program.program_vars" class="anchor"></a><code>program_vars : <a href="index.html#type-variable_dict">variable_dict</a>;</code></td><td class="doc"><p>A static register of all variables that can be used during a calculation</p></td></tr><tr id="type-program.program_rules" class="anchored"><td class="def field"><a href="#type-program.program_rules" class="anchor"></a><code>program_rules : <span><a href="index.html#type-rule_data">rule_data</a> <a href="index.html#module-RuleMap">RuleMap</a>.t</span>;</code></td><td class="doc"><p>Definitions of variables, some may be removed during optimization passes</p></td></tr><tr id="type-program.program_conds" class="anchored"><td class="def field"><a href="#type-program.program_conds" class="anchor"></a><code>program_conds : <span><a href="index.html#type-condition_data">condition_data</a> <a href="index.html#module-VariableMap">VariableMap</a>.t</span>;</code></td><td class="doc"><p>Conditions are affected to dummy variables</p></td></tr><tr id="type-program.program_idmap" class="anchored"><td class="def field"><a href="#type-program.program_idmap" class="anchor"></a><code>program_idmap : <a href="index.html#type-idmap">idmap</a>;</code></td></tr><tr id="type-program.program_exec_passes" class="anchored"><td class="def field"><a href="#type-program.program_exec_passes" class="anchor"></a><code>program_exec_passes : <span><a href="index.html#type-exec_pass">exec_pass</a> list</span>;</code></td></tr></table><code>}</code></dt></dl><div class="spec module" id="module-Variable"><a href="#module-Variable" class="anchor"></a><code><span class="keyword">module</span> <a href="Variable/index.html">Variable</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-LocalVariable"><a href="#module-LocalVariable" class="anchor"></a><code><span class="keyword">module</span> <a href="LocalVariable/index.html">LocalVariable</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Local variables don't appear in the M source program but can be introduced by let bindings when translating to MIR. They should be De Bruijn indices but instead are unique globals identifiers out of laziness.</p></dd></dl><div class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-VariableDict"><a href="#module-VariableDict" class="anchor"></a><code><span class="keyword">module</span> <a href="VariableDict/index.html">VariableDict</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Variable dictionary, act as a set but refered by keys</p></dd></dl><dl><dt class="spec value" id="val-false_literal"><a href="#val-false_literal" class="anchor"></a><code><span class="keyword">val</span> false_literal : <a href="index.html#type-literal">literal</a></code></dt><dt class="spec value" id="val-true_literal"><a href="#val-true_literal" class="anchor"></a><code><span class="keyword">val</span> true_literal : <a href="index.html#type-literal">literal</a></code></dt><dt class="spec value" id="val-same_execution_number"><a href="#val-same_execution_number" class="anchor"></a><code><span class="keyword">val</span> same_execution_number : <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-find_var_name_by_alias"><a href="#val-find_var_name_by_alias" class="anchor"></a><code><span class="keyword">val</span> find_var_name_by_alias : <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-map_expr_var"><a href="#val-map_expr_var" class="anchor"></a><code><span class="keyword">val</span> map_expr_var : <span>(<span class="type-var">'v</span> <span>&#45;&gt;</span> <span class="type-var">'v2</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'v</span> <a href="index.html#type-expression_">expression_</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'v2</span> <a href="index.html#type-expression_">expression_</a></span></code></dt><dt class="spec value" id="val-map_var_def_var"><a href="#val-map_var_def_var" class="anchor"></a><code><span class="keyword">val</span> map_var_def_var : <span>(<span class="type-var">'v</span> <span>&#45;&gt;</span> <span class="type-var">'v2</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'v</span> <a href="index.html#type-variable_def_">variable_def_</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'v2</span> <a href="index.html#type-variable_def_">variable_def_</a></span></code></dt><dt class="spec value" id="val-map_cond_data_var"><a href="#val-map_cond_data_var" class="anchor"></a><code><span class="keyword">val</span> map_cond_data_var : <span>(<span class="type-var">'v</span> <span>&#45;&gt;</span> <span class="type-var">'v2</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'v</span> <a href="index.html#type-condition_data_">condition_data_</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'v2</span> <a href="index.html#type-condition_data_">condition_data_</a></span></code></dt><dt class="spec value" id="val-fold_vars"><a href="#val-fold_vars" class="anchor"></a><code><span class="keyword">val</span> fold_vars : <span>(<a href="index.html#type-variable">variable</a> <span>&#45;&gt;</span> <a href="index.html#type-variable_data">variable_data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-map_vars"><a href="#val-map_vars" class="anchor"></a><code><span class="keyword">val</span> map_vars : <span>(<a href="index.html#type-variable">variable</a> <span>&#45;&gt;</span> <a href="index.html#type-variable_data">variable_data</a> <span>&#45;&gt;</span> <a href="index.html#type-variable_data">variable_data</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <a href="index.html#type-program">program</a></code></dt><dt class="spec value" id="val-compare_execution_number"><a href="#val-compare_execution_number" class="anchor"></a><code><span class="keyword">val</span> compare_execution_number : <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-rule_id">rule_id</a></code></dt><dt class="spec value" id="val-find_var_definition"><a href="#val-find_var_definition" class="anchor"></a><code><span class="keyword">val</span> find_var_definition : <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <a href="index.html#type-variable">variable</a> <span>&#45;&gt;</span> <a href="index.html#type-rule_data">rule_data</a> * <a href="index.html#type-variable_data">variable_data</a></code></dt><dt class="spec value" id="val-max_exec_number"><a href="#val-max_exec_number" class="anchor"></a><code><span class="keyword">val</span> max_exec_number : <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-max_result">max_result</a></code></dt><dt class="spec value" id="val-is_candidate_valid"><a href="#val-is_candidate_valid" class="anchor"></a><code><span class="keyword">val</span> is_candidate_valid : <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> <a href="index.html#type-execution_number">execution_number</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-fresh_rule_id"><a href="#val-fresh_rule_id" class="anchor"></a><code><span class="keyword">val</span> fresh_rule_id : unit <span>&#45;&gt;</span> <a href="index.html#type-rule_id">rule_id</a></code></dt><dt class="spec value" id="val-initial_undef_rule_id"><a href="#val-initial_undef_rule_id" class="anchor"></a><code><span class="keyword">val</span> initial_undef_rule_id : <a href="index.html#type-rule_id">rule_id</a></code></dt><dt class="spec value" id="val-find_var_by_name"><a href="#val-find_var_by_name" class="anchor"></a><code><span class="keyword">val</span> find_var_by_name : <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <span>string <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-variable">variable</a></code></dt><dd><p>Get a variable for a given name or alias, because of SSA multiple variables share a name or alias. If an alias is provided, the variable returned is that with the lowest execution number. When a name is provided, then the variable with the highest execution number is returned.</p></dd></dl><dl><dt class="spec value" id="val-is_dummy_variable"><a href="#val-is_dummy_variable" class="anchor"></a><code><span class="keyword">val</span> is_dummy_variable : <a href="Variable/index.html#type-t">Variable.t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-find_vars_by_io"><a href="#val-find_vars_by_io" class="anchor"></a><code><span class="keyword">val</span> find_vars_by_io : <a href="index.html#type-program">program</a> <span>&#45;&gt;</span> <a href="index.html#type-io">io</a> <span>&#45;&gt;</span> <a href="VariableDict/index.html#type-t">VariableDict.t</a></code></dt><dd><p>Returns a VariableDict.t containing all the variables that have a given io type, only one variable per name is entered in the VariableDict.t, this function chooses the one with the highest execution number</p></dd></dl></div></body></html>