<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mast (mlang.Mlang.Mast)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">mlang</a> &#x00BB; <a href="../index.html">Mlang</a> &#x00BB; Mast</nav><header class="odoc-preamble"><h1>Module <code><span>Mlang.Mast</span></code></h1><p>Abstract Syntax Tree for M</p></header><nav class="odoc-toc"><ul><li><a href="#abstract-syntax-tree">Abstract Syntax Tree</a><ul><li><a href="#names">Names</a></li><li><a href="#literals">Literals</a></li><li><a href="#expressions">Expressions</a></li></ul></li><li><a href="#toplevel-clauses">Toplevel clauses</a><ul><li><a href="#rules">Rules</a></li><li><a href="#variable-declaration">Variable declaration</a><ul><li><a href="#input-variables">Input variables</a></li></ul></li><li><a href="#verification-clauses">Verification clauses</a></li></ul></li><li><a href="#m-programs">M programs</a></li><li><a href="#helper-functions">Helper functions</a></li></ul></nav><div class="odoc-content"><h2 id="abstract-syntax-tree"><a href="#abstract-syntax-tree" class="anchor"></a>Abstract Syntax Tree</h2><p>This AST is very close to the concrete syntax. It features many elements that are just dropped in later phases of the compiler, but may be used by other DGFiP applications</p><h3 id="names"><a href="#names" class="anchor"></a>Names</h3><div class="odoc-spec"><div class="spec type" id="type-application" class="anchored"><a href="#type-application" class="anchor"></a><code><span><span class="keyword">type</span> application</span><span> = string</span></code></div><div class="spec-doc"><p>Applications are rule annotations. The 3 main DGFiP applications seem to be:</p><ul><li><code>batch</code>: deprecated, used to compute the income tax but not anymore;</li><li><code>bareme</code>: seems to compute the income tax;</li><li><code>iliad</code>: usage unkown, much bigger than <code>bareme</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-chaining" class="anchored"><a href="#type-chaining" class="anchor"></a><code><span><span class="keyword">type</span> chaining</span><span> = string</span></code></div><div class="spec-doc"><p>&quot;enchaineur&quot; in the M source code, utility unknown</p></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_name" class="anchored"><a href="#type-variable_name" class="anchor"></a><code><span><span class="keyword">type</span> variable_name</span><span> = string</span></code></div><div class="spec-doc"><p>Variables are just strings</p></div></div><div class="odoc-spec"><div class="spec type" id="type-func_name" class="anchored"><a href="#type-func_name" class="anchor"></a><code><span><span class="keyword">type</span> func_name</span><span> = string</span></code></div><div class="spec-doc"><p>Func names are just string for the moment</p></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_generic_name" class="anchored"><a href="#type-variable_generic_name" class="anchor"></a><code><span><span class="keyword">type</span> variable_generic_name</span><span> = </span><span>{</span></code><table><tr id="type-variable_generic_name.base" class="anchored"><td class="def record field"><a href="#type-variable_generic_name.base" class="anchor"></a><code><span>base : string;</span></code></td></tr><tr id="type-variable_generic_name.parameters" class="anchored"><td class="def record field"><a href="#type-variable_generic_name.parameters" class="anchor"></a><code><span>parameters : <span>char list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>For generic variables, we record the list of their lowercase parameters</p></div></div><div class="odoc-spec"><div class="spec type" id="type-error_name" class="anchored"><a href="#type-error_name" class="anchor"></a><code><span><span class="keyword">type</span> error_name</span><span> = string</span></code></div><div class="spec-doc"><p>Ununsed for now</p></div></div><h3 id="literals"><a href="#literals" class="anchor"></a>Literals</h3><div class="odoc-spec"><div class="spec type" id="type-variable" class="anchored"><a href="#type-variable" class="anchor"></a><code><span><span class="keyword">type</span> variable</span><span> = </span></code><table><tr id="type-variable.Normal" class="anchored"><td class="def variant constructor"><a href="#type-variable.Normal" class="anchor"></a><code><span>| </span><span><span class="constructor">Normal</span> <span class="keyword">of</span> <a href="#type-variable_name">variable_name</a></span></code></td></tr><tr id="type-variable.Generic" class="anchored"><td class="def variant constructor"><a href="#type-variable.Generic" class="anchor"></a><code><span>| </span><span><span class="constructor">Generic</span> <span class="keyword">of</span> <a href="#type-variable_generic_name">variable_generic_name</a></span></code></td></tr></table></div><div class="spec-doc"><p>A variable is either generic (with loop parameters) or normal</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_normal_var" class="anchored"><a href="#val-get_normal_var" class="anchor"></a><code><span><span class="keyword">val</span> get_normal_var : <span><a href="#type-variable">variable</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-variable_name">variable_name</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-table_size" class="anchored"><a href="#type-table_size" class="anchor"></a><code><span><span class="keyword">type</span> table_size</span><span> = </span></code><table><tr id="type-table_size.LiteralSize" class="anchored"><td class="def variant constructor"><a href="#type-table_size.LiteralSize" class="anchor"></a><code><span>| </span><span><span class="constructor">LiteralSize</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-table_size.SymbolSize" class="anchored"><td class="def variant constructor"><a href="#type-table_size.SymbolSize" class="anchor"></a><code><span>| </span><span><span class="constructor">SymbolSize</span> <span class="keyword">of</span> string</span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-get_table_size" class="anchored"><a href="#val-get_table_size" class="anchor"></a><code><span><span class="keyword">val</span> get_table_size : <span><a href="#type-table_size">table_size</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_table_size_opt" class="anchored"><a href="#val-get_table_size_opt" class="anchor"></a><code><span><span class="keyword">val</span> get_table_size_opt : <span><span><span>(<a href="#type-table_size">table_size</a> * <span class="type-var">'a</span>)</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * <span class="type-var">'a</span>)</span> option</span></span></code></div></div><h3 id="expressions"><a href="#expressions" class="anchor"></a>Expressions</h3><div class="odoc-spec"><div class="spec type" id="type-var_category_id" class="anchored"><a href="#type-var_category_id" class="anchor"></a><code><span><span class="keyword">type</span> var_category_id</span><span> = <span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-set_value" class="anchored"><a href="#type-set_value" class="anchor"></a><code><span><span class="keyword">type</span> set_value</span><span> = <span><a href="#type-variable">variable</a> <a href="../Com/index.html#type-set_value">Com.set_value</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-expression" class="anchored"><a href="#type-expression" class="anchor"></a><code><span><span class="keyword">type</span> expression</span><span> = <span><a href="#type-variable">variable</a> <a href="../Com/index.html#type-expression">Com.expression</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-m_expression" class="anchored"><a href="#type-m_expression" class="anchor"></a><code><span><span class="keyword">type</span> m_expression</span><span> = <span><a href="#type-expression">expression</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></div></div><h2 id="toplevel-clauses"><a href="#toplevel-clauses" class="anchor"></a>Toplevel clauses</h2><h3 id="rules"><a href="#rules" class="anchor"></a>Rules</h3><p>The rule is the main feature of the M language. It defines the expression of one or several variables.</p><div class="odoc-spec"><div class="spec type" id="type-instruction" class="anchored"><a href="#type-instruction" class="anchor"></a><code><span><span class="keyword">type</span> instruction</span><span> = <span><span>( <a href="#type-variable">variable</a>, <a href="#type-error_name">error_name</a> )</span> <a href="../Com/index.html#type-instruction">Com.instruction</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-m_instruction" class="anchored"><a href="#type-m_instruction" class="anchor"></a><code><span><span class="keyword">type</span> m_instruction</span><span> = <span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rule" class="anchored"><a href="#type-rule" class="anchor"></a><code><span><span class="keyword">type</span> rule</span><span> = </span><span>{</span></code><table><tr id="type-rule.rule_number" class="anchored"><td class="def record field"><a href="#type-rule.rule_number" class="anchor"></a><code><span>rule_number : <span>int <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-rule.rule_tag_names" class="anchored"><td class="def record field"><a href="#type-rule.rule_tag_names" class="anchor"></a><code><span>rule_tag_names : <span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-rule.rule_apps" class="anchored"><td class="def record field"><a href="#type-rule.rule_apps" class="anchor"></a><code><span>rule_apps : <span><span><a href="#type-application">application</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-rule.rule_chainings" class="anchored"><td class="def record field"><a href="#type-rule.rule_chainings" class="anchor"></a><code><span>rule_chainings : <span><span><a href="#type-chaining">chaining</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-rule.rule_tmp_vars" class="anchored"><td class="def record field"><a href="#type-rule.rule_tmp_vars" class="anchor"></a><code><span>rule_tmp_vars : <span><span>(<span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><a href="#type-table_size">table_size</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>)</span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-rule.rule_formulaes" class="anchored"><td class="def record field"><a href="#type-rule.rule_formulaes" class="anchor"></a><code><span>rule_formulaes : <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A rule can contain many variable definitions</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-target" class="anchored"><a href="#type-target" class="anchor"></a><code><span><span class="keyword">type</span> target</span><span> = </span><span>{</span></code><table><tr id="type-target.target_name" class="anchored"><td class="def record field"><a href="#type-target.target_name" class="anchor"></a><code><span>target_name : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-target.target_file" class="anchored"><td class="def record field"><a href="#type-target.target_file" class="anchor"></a><code><span>target_file : <span>string option</span>;</span></code></td></tr><tr id="type-target.target_apps" class="anchored"><td class="def record field"><a href="#type-target.target_apps" class="anchor"></a><code><span>target_apps : <span><span><a href="#type-application">application</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-target.target_args" class="anchored"><td class="def record field"><a href="#type-target.target_args" class="anchor"></a><code><span>target_args : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-target.target_result" class="anchored"><td class="def record field"><a href="#type-target.target_result" class="anchor"></a><code><span>target_result : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td></tr><tr id="type-target.target_tmp_vars" class="anchored"><td class="def record field"><a href="#type-target.target_tmp_vars" class="anchor"></a><code><span>target_tmp_vars : <span><span>(<span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><a href="#type-table_size">table_size</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>)</span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-target.target_nb_tmps" class="anchored"><td class="def record field"><a href="#type-target.target_nb_tmps" class="anchor"></a><code><span>target_nb_tmps : int;</span></code></td></tr><tr id="type-target.target_sz_tmps" class="anchored"><td class="def record field"><a href="#type-target.target_sz_tmps" class="anchor"></a><code><span>target_sz_tmps : int;</span></code></td></tr><tr id="type-target.target_nb_refs" class="anchored"><td class="def record field"><a href="#type-target.target_nb_refs" class="anchor"></a><code><span>target_nb_refs : int;</span></code></td></tr><tr id="type-target.target_prog" class="anchored"><td class="def record field"><a href="#type-target.target_prog" class="anchor"></a><code><span>target_prog : <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-domain_decl" class="anchored"><a href="#type-domain_decl" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a domain_decl</span></span><span> = </span><span>{</span></code><table><tr id="type-domain_decl.dom_names" class="anchored"><td class="def record field"><a href="#type-domain_decl.dom_names" class="anchor"></a><code><span>dom_names : <span><span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-domain_decl.dom_parents" class="anchored"><td class="def record field"><a href="#type-domain_decl.dom_parents" class="anchor"></a><code><span>dom_parents : <span><span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-domain_decl.dom_by_default" class="anchored"><td class="def record field"><a href="#type-domain_decl.dom_by_default" class="anchor"></a><code><span>dom_by_default : bool;</span></code></td></tr><tr id="type-domain_decl.dom_data" class="anchored"><td class="def record field"><a href="#type-domain_decl.dom_data" class="anchor"></a><code><span>dom_data : <span class="type-var">'a</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rule_domain_data" class="anchored"><a href="#type-rule_domain_data" class="anchor"></a><code><span><span class="keyword">type</span> rule_domain_data</span><span> = </span><span>{</span></code><table><tr id="type-rule_domain_data.rdom_computable" class="anchored"><td class="def record field"><a href="#type-rule_domain_data.rdom_computable" class="anchor"></a><code><span>rdom_computable : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rule_domain_decl" class="anchored"><a href="#type-rule_domain_decl" class="anchor"></a><code><span><span class="keyword">type</span> rule_domain_decl</span><span> = <span><a href="#type-rule_domain_data">rule_domain_data</a> <a href="#type-domain_decl">domain_decl</a></span></span></code></div></div><h3 id="variable-declaration"><a href="#variable-declaration" class="anchor"></a>Variable declaration</h3><p>The M language has prototypes for declaring variables with types and various attributes. There are three kind of variables: input variables, computed variables and constant variables.</p><p>Variable declaration is not application-specific, which is not coherent.</p><h4 id="input-variables"><a href="#input-variables" class="anchor"></a>Input variables</h4><div class="odoc-spec"><div class="spec type" id="type-variable_attribute" class="anchored"><a href="#type-variable_attribute" class="anchor"></a><code><span><span class="keyword">type</span> variable_attribute</span><span> = <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span>int <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-input_variable" class="anchored"><a href="#type-input_variable" class="anchor"></a><code><span><span class="keyword">type</span> input_variable</span><span> = </span><span>{</span></code><table><tr id="type-input_variable.input_name" class="anchored"><td class="def record field"><a href="#type-input_variable.input_name" class="anchor"></a><code><span>input_name : <span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-input_variable.input_category" class="anchored"><td class="def record field"><a href="#type-input_variable.input_category" class="anchor"></a><code><span>input_category : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-input_variable.input_attributes" class="anchored"><td class="def record field"><a href="#type-input_variable.input_attributes" class="anchor"></a><code><span>input_attributes : <span><a href="#type-variable_attribute">variable_attribute</a> list</span>;</span></code></td></tr><tr id="type-input_variable.input_alias" class="anchored"><td class="def record field"><a href="#type-input_variable.input_alias" class="anchor"></a><code><span>input_alias : <span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Unused for now</p><span class="comment-delim">*)</span></td></tr><tr id="type-input_variable.input_is_givenback" class="anchored"><td class="def record field"><a href="#type-input_variable.input_is_givenback" class="anchor"></a><code><span>input_is_givenback : bool;</span></code></td></tr><tr id="type-input_variable.input_description" class="anchored"><td class="def record field"><a href="#type-input_variable.input_description" class="anchor"></a><code><span>input_description : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-input_variable.input_typ" class="anchored"><td class="def record field"><a href="#type-input_variable.input_typ" class="anchor"></a><code><span>input_typ : <span><span><a href="../Com/index.html#type-value_typ">Com.value_typ</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-computed_variable" class="anchored"><a href="#type-computed_variable" class="anchor"></a><code><span><span class="keyword">type</span> computed_variable</span><span> = </span><span>{</span></code><table><tr id="type-computed_variable.comp_name" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_name" class="anchor"></a><code><span>comp_name : <span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-computed_variable.comp_table" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_table" class="anchor"></a><code><span>comp_table : <span><span><a href="#type-table_size">table_size</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>size of the table, <code>None</code> for non-table variables</p><span class="comment-delim">*)</span></td></tr><tr id="type-computed_variable.comp_attributes" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_attributes" class="anchor"></a><code><span>comp_attributes : <span><a href="#type-variable_attribute">variable_attribute</a> list</span>;</span></code></td></tr><tr id="type-computed_variable.comp_category" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_category" class="anchor"></a><code><span>comp_category : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-computed_variable.comp_typ" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_typ" class="anchor"></a><code><span>comp_typ : <span><span><a href="../Com/index.html#type-value_typ">Com.value_typ</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td></tr><tr id="type-computed_variable.comp_is_givenback" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_is_givenback" class="anchor"></a><code><span>comp_is_givenback : bool;</span></code></td></tr><tr id="type-computed_variable.comp_description" class="anchored"><td class="def record field"><a href="#type-computed_variable.comp_description" class="anchor"></a><code><span>comp_description : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_decl" class="anchored"><a href="#type-variable_decl" class="anchor"></a><code><span><span class="keyword">type</span> variable_decl</span><span> = </span></code><table><tr id="type-variable_decl.ComputedVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_decl.ComputedVar" class="anchor"></a><code><span>| </span><span><span class="constructor">ComputedVar</span> <span class="keyword">of</span> <span><a href="#type-computed_variable">computed_variable</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-variable_decl.ConstVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_decl.ConstVar" class="anchor"></a><code><span>| </span><span><span class="constructor">ConstVar</span> <span class="keyword">of</span> <span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><a href="#type-variable">variable</a> <a href="../Com/index.html#type-atom">Com.atom</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The literal is the constant value</p><span class="comment-delim">*)</span></td></tr><tr id="type-variable_decl.InputVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_decl.InputVar" class="anchor"></a><code><span>| </span><span><span class="constructor">InputVar</span> <span class="keyword">of</span> <span><a href="#type-input_variable">input_variable</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-var_type" class="anchored"><a href="#type-var_type" class="anchor"></a><code><span><span class="keyword">type</span> var_type</span><span> = </span></code><table><tr id="type-var_type.Input" class="anchored"><td class="def variant constructor"><a href="#type-var_type.Input" class="anchor"></a><code><span>| </span><span><span class="constructor">Input</span></span></code></td></tr><tr id="type-var_type.Computed" class="anchored"><td class="def variant constructor"><a href="#type-var_type.Computed" class="anchor"></a><code><span>| </span><span><span class="constructor">Computed</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-var_category_decl" class="anchored"><a href="#type-var_category_decl" class="anchor"></a><code><span><span class="keyword">type</span> var_category_decl</span><span> = </span><span>{</span></code><table><tr id="type-var_category_decl.var_type" class="anchored"><td class="def record field"><a href="#type-var_category_decl.var_type" class="anchor"></a><code><span>var_type : <a href="#type-var_type">var_type</a>;</span></code></td></tr><tr id="type-var_category_decl.var_category" class="anchored"><td class="def record field"><a href="#type-var_category_decl.var_category" class="anchor"></a><code><span>var_category : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-var_category_decl.var_attributes" class="anchored"><td class="def record field"><a href="#type-var_category_decl.var_attributes" class="anchor"></a><code><span>var_attributes : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-input_category" class="anchored"><a href="#val-input_category" class="anchor"></a><code><span><span class="keyword">val</span> input_category : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-computed_category" class="anchored"><a href="#val-computed_category" class="anchor"></a><code><span><span class="keyword">val</span> computed_category : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-base_category" class="anchored"><a href="#val-base_category" class="anchor"></a><code><span><span class="keyword">val</span> base_category : string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-givenback_category" class="anchored"><a href="#val-givenback_category" class="anchor"></a><code><span><span class="keyword">val</span> givenback_category : string</span></code></div></div><h3 id="verification-clauses"><a href="#verification-clauses" class="anchor"></a>Verification clauses</h3><p>These clauses are expression refering to the variables of the program. They seem to be dynamically checked and trigger errors when false.</p><div class="odoc-spec"><div class="spec type" id="type-verification_condition" class="anchored"><a href="#type-verification_condition" class="anchor"></a><code><span><span class="keyword">type</span> verification_condition</span><span> = </span><span>{</span></code><table><tr id="type-verification_condition.verif_cond_expr" class="anchored"><td class="def record field"><a href="#type-verification_condition.verif_cond_expr" class="anchor"></a><code><span>verif_cond_expr : <span><a href="#type-expression">expression</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-verification_condition.verif_cond_error" class="anchored"><td class="def record field"><a href="#type-verification_condition.verif_cond_error" class="anchor"></a><code><span>verif_cond_error : <span><a href="#type-error_name">error_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A verification condition error can ba associated to a variable</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-verification" class="anchored"><a href="#type-verification" class="anchor"></a><code><span><span class="keyword">type</span> verification</span><span> = </span><span>{</span></code><table><tr id="type-verification.verif_number" class="anchored"><td class="def record field"><a href="#type-verification.verif_number" class="anchor"></a><code><span>verif_number : <span>int <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-verification.verif_tag_names" class="anchored"><td class="def record field"><a href="#type-verification.verif_tag_names" class="anchor"></a><code><span>verif_tag_names : <span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-verification.verif_apps" class="anchored"><td class="def record field"><a href="#type-verification.verif_apps" class="anchor"></a><code><span>verif_apps : <span><span><a href="#type-application">application</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Verification conditions are application-specific</p><span class="comment-delim">*)</span></td></tr><tr id="type-verification.verif_conditions" class="anchored"><td class="def record field"><a href="#type-verification.verif_conditions" class="anchor"></a><code><span>verif_conditions : <span><span><a href="#type-verification_condition">verification_condition</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-verif_domain_data" class="anchored"><a href="#type-verif_domain_data" class="anchor"></a><code><span><span class="keyword">type</span> verif_domain_data</span><span> = </span><span>{</span></code><table><tr id="type-verif_domain_data.vdom_auth" class="anchored"><td class="def record field"><a href="#type-verif_domain_data.vdom_auth" class="anchor"></a><code><span>vdom_auth : <span><a href="#type-var_category_id">var_category_id</a> list</span>;</span></code></td></tr><tr id="type-verif_domain_data.vdom_verifiable" class="anchored"><td class="def record field"><a href="#type-verif_domain_data.vdom_verifiable" class="anchor"></a><code><span>vdom_verifiable : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-verif_domain_decl" class="anchored"><a href="#type-verif_domain_decl" class="anchor"></a><code><span><span class="keyword">type</span> verif_domain_decl</span><span> = <span><a href="#type-verif_domain_data">verif_domain_data</a> <a href="#type-domain_decl">domain_decl</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-error_" class="anchored"><a href="#type-error_" class="anchor"></a><code><span><span class="keyword">type</span> error_</span><span> = </span><span>{</span></code><table><tr id="type-error_.error_name" class="anchored"><td class="def record field"><a href="#type-error_.error_name" class="anchor"></a><code><span>error_name : <span><a href="#type-error_name">error_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_.error_typ" class="anchored"><td class="def record field"><a href="#type-error_.error_typ" class="anchor"></a><code><span>error_typ : <span><a href="../Com/Error/index.html#type-typ">Com.Error.typ</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_.error_descr" class="anchored"><td class="def record field"><a href="#type-error_.error_descr" class="anchor"></a><code><span>error_descr : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><h2 id="m-programs"><a href="#m-programs" class="anchor"></a>M programs</h2><div class="odoc-spec"><div class="spec type" id="type-source_file_item" class="anchored"><a href="#type-source_file_item" class="anchor"></a><code><span><span class="keyword">type</span> source_file_item</span><span> = </span></code><table><tr id="type-source_file_item.Application" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Application" class="anchor"></a><code><span>| </span><span><span class="constructor">Application</span> <span class="keyword">of</span> <span><a href="#type-application">application</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Declares an application</p><span class="comment-delim">*)</span></td></tr><tr id="type-source_file_item.Chaining" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Chaining" class="anchor"></a><code><span>| </span><span><span class="constructor">Chaining</span> <span class="keyword">of</span> <span><a href="#type-chaining">chaining</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><a href="#type-application">application</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-source_file_item.VariableDecl" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.VariableDecl" class="anchor"></a><code><span>| </span><span><span class="constructor">VariableDecl</span> <span class="keyword">of</span> <a href="#type-variable_decl">variable_decl</a></span></code></td></tr><tr id="type-source_file_item.Function" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Function" class="anchor"></a><code><span>| </span><span><span class="constructor">Function</span> <span class="keyword">of</span> <a href="#type-target">target</a></span></code></td></tr><tr id="type-source_file_item.Rule" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Rule" class="anchor"></a><code><span>| </span><span><span class="constructor">Rule</span> <span class="keyword">of</span> <a href="#type-rule">rule</a></span></code></td></tr><tr id="type-source_file_item.Target" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Target" class="anchor"></a><code><span>| </span><span><span class="constructor">Target</span> <span class="keyword">of</span> <a href="#type-target">target</a></span></code></td></tr><tr id="type-source_file_item.Verification" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Verification" class="anchor"></a><code><span>| </span><span><span class="constructor">Verification</span> <span class="keyword">of</span> <a href="#type-verification">verification</a></span></code></td></tr><tr id="type-source_file_item.Error" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> <a href="#type-error_">error_</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Declares an error</p><span class="comment-delim">*)</span></td></tr><tr id="type-source_file_item.Output" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Output" class="anchor"></a><code><span>| </span><span><span class="constructor">Output</span> <span class="keyword">of</span> <span><a href="#type-variable_name">variable_name</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Declares an output variable</p><span class="comment-delim">*)</span></td></tr><tr id="type-source_file_item.Func" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.Func" class="anchor"></a><code><span>| </span><span><span class="constructor">Func</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Declares a function, unused</p><span class="comment-delim">*)</span></td></tr><tr id="type-source_file_item.VarCatDecl" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.VarCatDecl" class="anchor"></a><code><span>| </span><span><span class="constructor">VarCatDecl</span> <span class="keyword">of</span> <span><a href="#type-var_category_decl">var_category_decl</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-source_file_item.RuleDomDecl" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.RuleDomDecl" class="anchor"></a><code><span>| </span><span><span class="constructor">RuleDomDecl</span> <span class="keyword">of</span> <a href="#type-rule_domain_decl">rule_domain_decl</a></span></code></td></tr><tr id="type-source_file_item.VerifDomDecl" class="anchored"><td class="def variant constructor"><a href="#type-source_file_item.VerifDomDecl" class="anchor"></a><code><span>| </span><span><span class="constructor">VerifDomDecl</span> <span class="keyword">of</span> <a href="#type-verif_domain_decl">verif_domain_decl</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-source_file" class="anchored"><a href="#type-source_file" class="anchor"></a><code><span><span class="keyword">type</span> source_file</span><span> = <span><span><a href="#type-source_file_item">source_file_item</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-program" class="anchored"><a href="#type-program" class="anchor"></a><code><span><span class="keyword">type</span> program</span><span> = <span><a href="#type-source_file">source_file</a> list</span></span></code></div></div><h2 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper functions</h2><div class="odoc-spec"><div class="spec value" id="val-get_variable_name" class="anchored"><a href="#val-get_variable_name" class="anchor"></a><code><span><span class="keyword">val</span> get_variable_name : <span><a href="#type-variable">variable</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div></div></body></html>