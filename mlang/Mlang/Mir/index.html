<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mir (mlang.Mlang.Mir)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">mlang</a> &#x00BB; <a href="../index.html">Mlang</a> &#x00BB; Mir</nav><header class="odoc-preamble"><h1>Module <code><span>Mlang.Mir</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-cat_computed" class="anchored"><a href="#type-cat_computed" class="anchor"></a><code><span><span class="keyword">type</span> cat_computed</span><span> = </span></code><table><tr id="type-cat_computed.Base" class="anchored"><td class="def variant constructor"><a href="#type-cat_computed.Base" class="anchor"></a><code><span>| </span><span><span class="constructor">Base</span></span></code></td></tr><tr id="type-cat_computed.GivenBack" class="anchored"><td class="def variant constructor"><a href="#type-cat_computed.GivenBack" class="anchor"></a><code><span>| </span><span><span class="constructor">GivenBack</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec module" id="module-CatCompSet" class="anchored"><a href="#module-CatCompSet" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CatCompSet/index.html">CatCompSet</a></span><span> : <a href="../SetExt/module-type-T/index.html">SetExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../SetExt/module-type-T/index.html#type-elt">elt</a> = <a href="#type-cat_computed">cat_computed</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-cat_variable" class="anchored"><a href="#type-cat_variable" class="anchor"></a><code><span><span class="keyword">type</span> cat_variable</span><span> = </span></code><table><tr id="type-cat_variable.CatInput" class="anchored"><td class="def variant constructor"><a href="#type-cat_variable.CatInput" class="anchor"></a><code><span>| </span><span><span class="constructor">CatInput</span> <span class="keyword">of</span> <a href="../StrSet/index.html#type-t">StrSet.t</a></span></code></td></tr><tr id="type-cat_variable.CatComputed" class="anchored"><td class="def variant constructor"><a href="#type-cat_variable.CatComputed" class="anchor"></a><code><span>| </span><span><span class="constructor">CatComputed</span> <span class="keyword">of</span> <a href="CatCompSet/index.html#type-t">CatCompSet.t</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_cat_variable" class="anchored"><a href="#val-pp_cat_variable" class="anchor"></a><code><span><span class="keyword">val</span> pp_cat_variable : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cat_variable">cat_variable</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_cat_variable" class="anchored"><a href="#val-compare_cat_variable" class="anchor"></a><code><span><span class="keyword">val</span> compare_cat_variable : <span><a href="#type-cat_variable">cat_variable</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cat_variable">cat_variable</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-CatVarSet" class="anchored"><a href="#module-CatVarSet" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CatVarSet/index.html">CatVarSet</a></span><span> : <a href="../SetExt/module-type-T/index.html">SetExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../SetExt/module-type-T/index.html#type-elt">elt</a> = <a href="#type-cat_variable">cat_variable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-CatVarMap" class="anchored"><a href="#module-CatVarMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CatVarMap/index.html">CatVarMap</a></span><span> : <a href="../MapExt/module-type-T/index.html">MapExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../MapExt/module-type-T/index.html#type-key">key</a> = <a href="#type-cat_variable">cat_variable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-cat_variable_loc" class="anchored"><a href="#type-cat_variable_loc" class="anchor"></a><code><span><span class="keyword">type</span> cat_variable_loc</span><span> = </span></code><table><tr id="type-cat_variable_loc.LocCalculated" class="anchored"><td class="def variant constructor"><a href="#type-cat_variable_loc.LocCalculated" class="anchor"></a><code><span>| </span><span><span class="constructor">LocCalculated</span></span></code></td></tr><tr id="type-cat_variable_loc.LocBase" class="anchored"><td class="def variant constructor"><a href="#type-cat_variable_loc.LocBase" class="anchor"></a><code><span>| </span><span><span class="constructor">LocBase</span></span></code></td></tr><tr id="type-cat_variable_loc.LocInput" class="anchored"><td class="def variant constructor"><a href="#type-cat_variable_loc.LocInput" class="anchor"></a><code><span>| </span><span><span class="constructor">LocInput</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-cat_variable_data" class="anchored"><a href="#type-cat_variable_data" class="anchor"></a><code><span><span class="keyword">type</span> cat_variable_data</span><span> = </span><span>{</span></code><table><tr id="type-cat_variable_data.id" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.id" class="anchor"></a><code><span>id : <a href="#type-cat_variable">cat_variable</a>;</span></code></td></tr><tr id="type-cat_variable_data.id_str" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.id_str" class="anchor"></a><code><span>id_str : string;</span></code></td></tr><tr id="type-cat_variable_data.id_int" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.id_int" class="anchor"></a><code><span>id_int : int;</span></code></td></tr><tr id="type-cat_variable_data.loc" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.loc" class="anchor"></a><code><span>loc : <a href="#type-cat_variable_loc">cat_variable_loc</a>;</span></code></td></tr><tr id="type-cat_variable_data.pos" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.pos" class="anchor"></a><code><span>pos : <a href="../Pos/index.html#type-t">Pos.t</a>;</span></code></td></tr><tr id="type-cat_variable_data.attributs" class="anchored"><td class="def record field"><a href="#type-cat_variable_data.attributs" class="anchor"></a><code><span>attributs : <span><a href="../Pos/index.html#type-t">Pos.t</a> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_id" class="anchored"><a href="#type-variable_id" class="anchor"></a><code><span><span class="keyword">type</span> variable_id</span><span> = int</span></code></div><div class="spec-doc"><p>Each variable has an unique ID</p></div></div><div class="odoc-spec"><div class="spec type" id="type-variable" class="anchored"><a href="#type-variable" class="anchor"></a><code><span><span class="keyword">type</span> variable</span><span> = </span><span>{</span></code><table><tr id="type-variable.name" class="anchored"><td class="def record field"><a href="#type-variable.name" class="anchor"></a><code><span>name : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The position is the variable declaration</p><span class="comment-delim">*)</span></td></tr><tr id="type-variable.alias" class="anchored"><td class="def record field"><a href="#type-variable.alias" class="anchor"></a><code><span>alias : <span>string option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Input variable have an alias</p><span class="comment-delim">*)</span></td></tr><tr id="type-variable.id" class="anchored"><td class="def record field"><a href="#type-variable.id" class="anchor"></a><code><span>id : <a href="#type-variable_id">variable_id</a>;</span></code></td></tr><tr id="type-variable.descr" class="anchored"><td class="def record field"><a href="#type-variable.descr" class="anchor"></a><code><span>descr : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Description taken from the variable declaration</p><span class="comment-delim">*)</span></td></tr><tr id="type-variable.attributes" class="anchored"><td class="def record field"><a href="#type-variable.attributes" class="anchor"></a><code><span>attributes : <span><a href="../Mast/index.html#type-variable_attribute">Mast.variable_attribute</a> list</span>;</span></code></td></tr><tr id="type-variable.origin" class="anchored"><td class="def record field"><a href="#type-variable.origin" class="anchor"></a><code><span>origin : <span><a href="#type-variable">variable</a> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>If the variable is an SSA duplication, refers to the original (declared) variable</p><span class="comment-delim">*)</span></td></tr><tr id="type-variable.cats" class="anchored"><td class="def record field"><a href="#type-variable.cats" class="anchor"></a><code><span>cats : <span><a href="#type-cat_variable">cat_variable</a> option</span>;</span></code></td></tr><tr id="type-variable.is_table" class="anchored"><td class="def record field"><a href="#type-variable.is_table" class="anchor"></a><code><span>is_table : <span>int option</span>;</span></code></td></tr><tr id="type-variable.is_temp" class="anchored"><td class="def record field"><a href="#type-variable.is_temp" class="anchor"></a><code><span>is_temp : bool;</span></code></td></tr><tr id="type-variable.is_it" class="anchored"><td class="def record field"><a href="#type-variable.is_it" class="anchor"></a><code><span>is_it : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-local_variable" class="anchored"><a href="#type-local_variable" class="anchor"></a><code><span><span class="keyword">type</span> local_variable</span><span> = </span><span>{</span></code><table><tr id="type-local_variable.id" class="anchored"><td class="def record field"><a href="#type-local_variable.id" class="anchor"></a><code><span>id : int;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-typ" class="anchored"><a href="#type-typ" class="anchor"></a><code><span><span class="keyword">type</span> typ</span><span> = </span></code><table><tr id="type-typ.Real" class="anchored"><td class="def variant constructor"><a href="#type-typ.Real" class="anchor"></a><code><span>| </span><span><span class="constructor">Real</span></span></code></td></tr></table></div><div class="spec-doc"><p>Type of MIR values</p></div></div><div class="odoc-spec"><div class="spec type" id="type-literal" class="anchored"><a href="#type-literal" class="anchor"></a><code><span><span class="keyword">type</span> literal</span><span> = </span></code><table><tr id="type-literal.Float" class="anchored"><td class="def variant constructor"><a href="#type-literal.Float" class="anchor"></a><code><span>| </span><span><span class="constructor">Float</span> <span class="keyword">of</span> float</span></code></td></tr><tr id="type-literal.Undefined" class="anchored"><td class="def variant constructor"><a href="#type-literal.Undefined" class="anchor"></a><code><span>| </span><span><span class="constructor">Undefined</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-func" class="anchored"><a href="#type-func" class="anchor"></a><code><span><span class="keyword">type</span> func</span><span> = </span></code><table><tr id="type-func.SumFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.SumFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">SumFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Sums the arguments</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.AbsFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.AbsFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">AbsFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Absolute value</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.MinFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.MinFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">MinFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Minimum of a list of values</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.MaxFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.MaxFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">MaxFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Maximum of a list of values</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.GtzFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.GtzFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">GtzFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Greater than zero (strict) ?</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.GtezFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.GtezFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">GtezFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Greater or equal than zero ?</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.NullFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.NullFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">NullFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Equal to zero ?</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.ArrFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.ArrFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">ArrFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Round to nearest integer</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.InfFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.InfFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">InfFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Truncate to integer</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.PresentFunc" class="anchored"><td class="def variant constructor"><a href="#type-func.PresentFunc" class="anchor"></a><code><span>| </span><span><span class="constructor">PresentFunc</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Different than zero ?</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.Multimax" class="anchored"><td class="def variant constructor"><a href="#type-func.Multimax" class="anchor"></a><code><span>| </span><span><span class="constructor">Multimax</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>???</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.Supzero" class="anchored"><td class="def variant constructor"><a href="#type-func.Supzero" class="anchor"></a><code><span>| </span><span><span class="constructor">Supzero</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>???</p><span class="comment-delim">*)</span></td></tr><tr id="type-func.VerifNumber" class="anchored"><td class="def variant constructor"><a href="#type-func.VerifNumber" class="anchor"></a><code><span>| </span><span><span class="constructor">VerifNumber</span></span></code></td></tr><tr id="type-func.ComplNumber" class="anchored"><td class="def variant constructor"><a href="#type-func.ComplNumber" class="anchor"></a><code><span>| </span><span><span class="constructor">ComplNumber</span></span></code></td></tr></table></div><div class="spec-doc"><p>MIR only supports a restricted set of functions</p></div></div><p>MIR expressions are simpler than M; there are no loops or syntaxtic sugars.</p><p>Because translating to MIR requires a lot of unrolling and expansion, we introduce a <code>LocalLet</code> construct to avoid code duplication.</p><div class="odoc-spec"><div class="spec type" id="type-expression_" class="anchored"><a href="#type-expression_" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable expression_</span></span><span> = </span></code><table><tr id="type-expression_.Unop" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Unop" class="anchor"></a><code><span>| </span><span><span class="constructor">Unop</span> <span class="keyword">of</span> <a href="../Mast/index.html#type-unop">Mast.unop</a> * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.Comparison" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Comparison" class="anchor"></a><code><span>| </span><span><span class="constructor">Comparison</span> <span class="keyword">of</span> <span><a href="../Mast/index.html#type-comp_op">Mast.comp_op</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.Binop" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Binop" class="anchor"></a><code><span>| </span><span><span class="constructor">Binop</span> <span class="keyword">of</span> <span><a href="../Mast/index.html#type-binop">Mast.binop</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.Index" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Index" class="anchor"></a><code><span>| </span><span><span class="constructor">Index</span> <span class="keyword">of</span> <span><span class="type-var">'variable</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.Conditional" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Conditional" class="anchor"></a><code><span>| </span><span><span class="constructor">Conditional</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.FunctionCall" class="anchored"><td class="def variant constructor"><a href="#type-expression_.FunctionCall" class="anchor"></a><code><span>| </span><span><span class="constructor">FunctionCall</span> <span class="keyword">of</span> <a href="#type-func">func</a> * <span><span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-expression_.Literal" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Literal" class="anchor"></a><code><span>| </span><span><span class="constructor">Literal</span> <span class="keyword">of</span> <a href="#type-literal">literal</a></span></code></td></tr><tr id="type-expression_.Var" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Var" class="anchor"></a><code><span>| </span><span><span class="constructor">Var</span> <span class="keyword">of</span> <span class="type-var">'variable</span></span></code></td></tr><tr id="type-expression_.LocalVar" class="anchored"><td class="def variant constructor"><a href="#type-expression_.LocalVar" class="anchor"></a><code><span>| </span><span><span class="constructor">LocalVar</span> <span class="keyword">of</span> <a href="#type-local_variable">local_variable</a></span></code></td></tr><tr id="type-expression_.LocalLet" class="anchored"><td class="def variant constructor"><a href="#type-expression_.LocalLet" class="anchor"></a><code><span>| </span><span><span class="constructor">LocalLet</span> <span class="keyword">of</span> <a href="#type-local_variable">local_variable</a>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.NbCategory" class="anchored"><td class="def variant constructor"><a href="#type-expression_.NbCategory" class="anchor"></a><code><span>| </span><span><span class="constructor">NbCategory</span> <span class="keyword">of</span> <a href="CatVarSet/index.html#type-t">CatVarSet.t</a></span></code></td></tr><tr id="type-expression_.Attribut" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Attribut" class="anchor"></a><code><span>| </span><span><span class="constructor">Attribut</span> <span class="keyword">of</span> <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <span class="type-var">'variable</span> * <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-expression_.Size" class="anchored"><td class="def variant constructor"><a href="#type-expression_.Size" class="anchor"></a><code><span>| </span><span><span class="constructor">Size</span> <span class="keyword">of</span> <span class="type-var">'variable</span></span></code></td></tr><tr id="type-expression_.NbAnomalies" class="anchored"><td class="def variant constructor"><a href="#type-expression_.NbAnomalies" class="anchor"></a><code><span>| </span><span><span class="constructor">NbAnomalies</span></span></code></td></tr><tr id="type-expression_.NbDiscordances" class="anchored"><td class="def variant constructor"><a href="#type-expression_.NbDiscordances" class="anchor"></a><code><span>| </span><span><span class="constructor">NbDiscordances</span></span></code></td></tr><tr id="type-expression_.NbInformatives" class="anchored"><td class="def variant constructor"><a href="#type-expression_.NbInformatives" class="anchor"></a><code><span>| </span><span><span class="constructor">NbInformatives</span></span></code></td></tr><tr id="type-expression_.NbBloquantes" class="anchored"><td class="def variant constructor"><a href="#type-expression_.NbBloquantes" class="anchor"></a><code><span>| </span><span><span class="constructor">NbBloquantes</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-expression" class="anchored"><a href="#type-expression" class="anchor"></a><code><span><span class="keyword">type</span> expression</span><span> = <span><a href="#type-variable">variable</a> <a href="#type-expression_">expression_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-VariableMap" class="anchored"><a href="#module-VariableMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="VariableMap/index.html">VariableMap</a></span><span> : <a href="../MapExt/module-type-T/index.html">MapExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../MapExt/module-type-T/index.html#type-key">key</a> = <a href="#type-variable">variable</a></span></span></code></div><div class="spec-doc"><p>MIR programs are just mapping from variables to their definitions, and make a massive use of <code>VariableMap</code>.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-VariableDict" class="anchored"><a href="#module-VariableDict" class="anchor"></a><code><span><span class="keyword">module</span> <a href="VariableDict/index.html">VariableDict</a></span><span> : 
  <a href="../Dict/module-type-S/index.html">Dict.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Dict/module-type-S/index.html#type-key">key</a> = <a href="#type-variable_id">variable_id</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../Dict/module-type-S/index.html#type-elt">elt</a> = <a href="#type-variable">variable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-VariableSet" class="anchored"><a href="#module-VariableSet" class="anchor"></a><code><span><span class="keyword">module</span> <a href="VariableSet/index.html">VariableSet</a></span><span> : <a href="../SetExt/module-type-T/index.html">SetExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../SetExt/module-type-T/index.html#type-elt">elt</a> = <a href="#type-variable">variable</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-LocalVariableMap" class="anchored"><a href="#module-LocalVariableMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="LocalVariableMap/index.html">LocalVariableMap</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-IndexMap" class="anchored"><a href="#module-IndexMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="IndexMap/index.html">IndexMap</a></span><span> : <a href="../IntMap/module-type-T/index.html">IntMap.T</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-index_def" class="anchored"><a href="#type-index_def" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable index_def</span></span><span> = </span></code><table><tr id="type-index_def.IndexTable" class="anchored"><td class="def variant constructor"><a href="#type-index_def.IndexTable" class="anchor"></a><code><span>| </span><span><span class="constructor">IndexTable</span> <span class="keyword">of</span> <span><span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <a href="IndexMap/index.html#type-t">IndexMap.t</a></span></span></code></td></tr><tr id="type-index_def.IndexGeneric" class="anchored"><td class="def variant constructor"><a href="#type-index_def.IndexGeneric" class="anchor"></a><code><span>| </span><span><span class="constructor">IndexGeneric</span> <span class="keyword">of</span> <span class="type-var">'variable</span> * <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_def_" class="anchored"><a href="#type-variable_def_" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable variable_def_</span></span><span> = </span></code><table><tr id="type-variable_def_.SimpleVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_def_.SimpleVar" class="anchor"></a><code><span>| </span><span><span class="constructor">SimpleVar</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-variable_def_.TableVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_def_.TableVar" class="anchor"></a><code><span>| </span><span><span class="constructor">TableVar</span> <span class="keyword">of</span> int * <span><span class="type-var">'variable</span> <a href="#type-index_def">index_def</a></span></span></code></td></tr><tr id="type-variable_def_.InputVar" class="anchored"><td class="def variant constructor"><a href="#type-variable_def_.InputVar" class="anchor"></a><code><span>| </span><span><span class="constructor">InputVar</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_def" class="anchored"><a href="#type-variable_def" class="anchor"></a><code><span><span class="keyword">type</span> variable_def</span><span> = <span><a href="#type-variable">variable</a> <a href="#type-variable_def_">variable_def_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_data_" class="anchored"><a href="#type-variable_data_" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable variable_data_</span></span><span> = </span><span>{</span></code><table><tr id="type-variable_data_.var_definition" class="anchored"><td class="def record field"><a href="#type-variable_data_.var_definition" class="anchor"></a><code><span>var_definition : <span><span class="type-var">'variable</span> <a href="#type-variable_def_">variable_def_</a></span>;</span></code></td></tr><tr id="type-variable_data_.var_typ" class="anchored"><td class="def record field"><a href="#type-variable_data_.var_typ" class="anchor"></a><code><span>var_typ : <span><a href="#type-typ">typ</a> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The typing info here comes from the variable declaration in the source program</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-variable_data" class="anchored"><a href="#type-variable_data" class="anchor"></a><code><span><span class="keyword">type</span> variable_data</span><span> = <span><a href="#type-variable">variable</a> <a href="#type-variable_data_">variable_data_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rov_id" class="anchored"><a href="#type-rov_id" class="anchor"></a><code><span><span class="keyword">type</span> rov_id</span><span> = </span></code><table><tr id="type-rov_id.RuleID" class="anchored"><td class="def variant constructor"><a href="#type-rov_id.RuleID" class="anchor"></a><code><span>| </span><span><span class="constructor">RuleID</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-rov_id.VerifID" class="anchored"><td class="def variant constructor"><a href="#type-rov_id.VerifID" class="anchor"></a><code><span>| </span><span><span class="constructor">VerifID</span> <span class="keyword">of</span> int</span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec module" id="module-RuleMap" class="anchored"><a href="#module-RuleMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RuleMap/index.html">RuleMap</a></span><span> : <a href="../MapExt/module-type-T/index.html">MapExt.T</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../MapExt/module-type-T/index.html#type-key">key</a> = <a href="#type-rov_id">rov_id</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-TargetMap" class="anchored"><a href="#module-TargetMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TargetMap/index.html">TargetMap</a></span><span> : <a href="../StrMap/module-type-T/index.html">StrMap.T</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-domain" class="anchored"><a href="#type-domain" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a domain</span></span><span> = </span><span>{</span></code><table><tr id="type-domain.dom_id" class="anchored"><td class="def record field"><a href="#type-domain.dom_id" class="anchor"></a><code><span>dom_id : <span><a href="../StrSet/index.html#type-t">Mast.DomainId.t</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-domain.dom_names" class="anchored"><td class="def record field"><a href="#type-domain.dom_names" class="anchor"></a><code><span>dom_names : <span><a href="../Pos/index.html#type-t">Pos.t</a> <a href="../StrSetMap/index.html#type-t">Mast.DomainIdMap.t</a></span>;</span></code></td></tr><tr id="type-domain.dom_by_default" class="anchored"><td class="def record field"><a href="#type-domain.dom_by_default" class="anchor"></a><code><span>dom_by_default : bool;</span></code></td></tr><tr id="type-domain.dom_min" class="anchored"><td class="def record field"><a href="#type-domain.dom_min" class="anchor"></a><code><span>dom_min : <a href="../StrSetSet/index.html#type-t">Mast.DomainIdSet.t</a>;</span></code></td></tr><tr id="type-domain.dom_max" class="anchored"><td class="def record field"><a href="#type-domain.dom_max" class="anchor"></a><code><span>dom_max : <a href="../StrSetSet/index.html#type-t">Mast.DomainIdSet.t</a>;</span></code></td></tr><tr id="type-domain.dom_rov" class="anchored"><td class="def record field"><a href="#type-domain.dom_rov" class="anchor"></a><code><span>dom_rov : <a href="../IntSet/index.html#type-t">IntSet.t</a>;</span></code></td></tr><tr id="type-domain.dom_data" class="anchored"><td class="def record field"><a href="#type-domain.dom_data" class="anchor"></a><code><span>dom_data : <span class="type-var">'a</span>;</span></code></td></tr><tr id="type-domain.dom_used" class="anchored"><td class="def record field"><a href="#type-domain.dom_used" class="anchor"></a><code><span>dom_used : <span><span>int <a href="../Pos/index.html#type-marked">Pos.marked</a></span> option</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rule_domain_data" class="anchored"><a href="#type-rule_domain_data" class="anchor"></a><code><span><span class="keyword">type</span> rule_domain_data</span><span> = </span><span>{</span></code><table><tr id="type-rule_domain_data.rdom_computable" class="anchored"><td class="def record field"><a href="#type-rule_domain_data.rdom_computable" class="anchor"></a><code><span>rdom_computable : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rule_domain" class="anchored"><a href="#type-rule_domain" class="anchor"></a><code><span><span class="keyword">type</span> rule_domain</span><span> = <span><a href="#type-rule_domain_data">rule_domain_data</a> <a href="#type-domain">domain</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-print_arg" class="anchored"><a href="#type-print_arg" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable print_arg</span></span><span> = </span></code><table><tr id="type-print_arg.PrintString" class="anchored"><td class="def variant constructor"><a href="#type-print_arg.PrintString" class="anchor"></a><code><span>| </span><span><span class="constructor">PrintString</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-print_arg.PrintName" class="anchored"><td class="def variant constructor"><a href="#type-print_arg.PrintName" class="anchor"></a><code><span>| </span><span><span class="constructor">PrintName</span> <span class="keyword">of</span> <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <a href="#type-variable">variable</a></span></code></td></tr><tr id="type-print_arg.PrintAlias" class="anchored"><td class="def variant constructor"><a href="#type-print_arg.PrintAlias" class="anchor"></a><code><span>| </span><span><span class="constructor">PrintAlias</span> <span class="keyword">of</span> <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * <a href="#type-variable">variable</a></span></code></td></tr><tr id="type-print_arg.PrintIndent" class="anchored"><td class="def variant constructor"><a href="#type-print_arg.PrintIndent" class="anchor"></a><code><span>| </span><span><span class="constructor">PrintIndent</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-print_arg.PrintExpr" class="anchored"><td class="def variant constructor"><a href="#type-print_arg.PrintExpr" class="anchor"></a><code><span>| </span><span><span class="constructor">PrintExpr</span> <span class="keyword">of</span> <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> * int * int</span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-error_descr" class="anchored"><a href="#type-error_descr" class="anchor"></a><code><span><span class="keyword">type</span> error_descr</span><span> = </span><span>{</span></code><table><tr id="type-error_descr.kind" class="anchored"><td class="def record field"><a href="#type-error_descr.kind" class="anchor"></a><code><span>kind : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_descr.major_code" class="anchored"><td class="def record field"><a href="#type-error_descr.major_code" class="anchor"></a><code><span>major_code : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_descr.minor_code" class="anchored"><td class="def record field"><a href="#type-error_descr.minor_code" class="anchor"></a><code><span>minor_code : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_descr.description" class="anchored"><td class="def record field"><a href="#type-error_descr.description" class="anchor"></a><code><span>description : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-error_descr.isisf" class="anchored"><td class="def record field"><a href="#type-error_descr.isisf" class="anchor"></a><code><span>isisf : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><p>Errors are first-class objects</p><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span><span>{</span></code><table><tr id="type-error.name" class="anchored"><td class="def record field"><a href="#type-error.name" class="anchor"></a><code><span>name : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The position is the variable declaration</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.id" class="anchored"><td class="def record field"><a href="#type-error.id" class="anchor"></a><code><span>id : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Each variable has an unique ID</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.descr" class="anchored"><td class="def record field"><a href="#type-error.descr" class="anchor"></a><code><span>descr : <a href="#type-error_descr">error_descr</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Description taken from the variable declaration</p><span class="comment-delim">*)</span></td></tr><tr id="type-error.typ" class="anchored"><td class="def record field"><a href="#type-error.typ" class="anchor"></a><code><span>typ : <a href="../Mast/index.html#type-error_typ">Mast.error_typ</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Error" class="anchored"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Error/index.html">Error</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-instruction" class="anchored"><a href="#type-instruction" class="anchor"></a><code><span><span class="keyword">type</span> instruction</span><span> = </span></code><table><tr id="type-instruction.Affectation" class="anchored"><td class="def variant constructor"><a href="#type-instruction.Affectation" class="anchor"></a><code><span>| </span><span><span class="constructor">Affectation</span> <span class="keyword">of</span> <a href="#type-variable_id">variable_id</a> * <a href="#type-variable_data">variable_data</a></span></code></td></tr><tr id="type-instruction.IfThenElse" class="anchored"><td class="def variant constructor"><a href="#type-instruction.IfThenElse" class="anchor"></a><code><span>| </span><span><span class="constructor">IfThenElse</span> <span class="keyword">of</span> <a href="#type-expression">expression</a>
  * <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>
  * <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-instruction.ComputeTarget" class="anchored"><td class="def variant constructor"><a href="#type-instruction.ComputeTarget" class="anchor"></a><code><span>| </span><span><span class="constructor">ComputeTarget</span> <span class="keyword">of</span> <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span></span></code></td></tr><tr id="type-instruction.VerifBlock" class="anchored"><td class="def variant constructor"><a href="#type-instruction.VerifBlock" class="anchor"></a><code><span>| </span><span><span class="constructor">VerifBlock</span> <span class="keyword">of</span> <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-instruction.Print" class="anchored"><td class="def variant constructor"><a href="#type-instruction.Print" class="anchor"></a><code><span>| </span><span><span class="constructor">Print</span> <span class="keyword">of</span> <a href="../Mast/index.html#type-print_std">Mast.print_std</a> * <span><span><span><a href="#type-variable">variable</a> <a href="#type-print_arg">print_arg</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-instruction.Iterate" class="anchored"><td class="def variant constructor"><a href="#type-instruction.Iterate" class="anchor"></a><code><span>| </span><span><span class="constructor">Iterate</span> <span class="keyword">of</span> <a href="#type-variable_id">variable_id</a>
  * <a href="CatVarSet/index.html#type-t">CatVarSet.t</a>
  * <span><a href="#type-expression">expression</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>
  * <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-instruction.Restore" class="anchored"><td class="def variant constructor"><a href="#type-instruction.Restore" class="anchor"></a><code><span>| </span><span><span class="constructor">Restore</span> <span class="keyword">of</span> <span><a href="../Pos/index.html#type-t">Pos.t</a> <a href="VariableMap/index.html#type-t">VariableMap.t</a></span>
  * <span><span>(<a href="#type-variable">variable</a> * <a href="CatVarSet/index.html#type-t">CatVarSet.t</a> * <span><a href="#type-expression">expression</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>)</span> list</span>
  * <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span></span></code></td></tr><tr id="type-instruction.RaiseError" class="anchored"><td class="def variant constructor"><a href="#type-instruction.RaiseError" class="anchor"></a><code><span>| </span><span><span class="constructor">RaiseError</span> <span class="keyword">of</span> <a href="#type-error">error</a> * <span>string option</span></span></code></td></tr><tr id="type-instruction.CleanErrors" class="anchored"><td class="def variant constructor"><a href="#type-instruction.CleanErrors" class="anchor"></a><code><span>| </span><span><span class="constructor">CleanErrors</span></span></code></td></tr><tr id="type-instruction.ExportErrors" class="anchored"><td class="def variant constructor"><a href="#type-instruction.ExportErrors" class="anchor"></a><code><span>| </span><span><span class="constructor">ExportErrors</span></span></code></td></tr><tr id="type-instruction.FinalizeErrors" class="anchored"><td class="def variant constructor"><a href="#type-instruction.FinalizeErrors" class="anchor"></a><code><span>| </span><span><span class="constructor">FinalizeErrors</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-rule_data" class="anchored"><a href="#type-rule_data" class="anchor"></a><code><span><span class="keyword">type</span> rule_data</span><span> = </span><span>{</span></code><table><tr id="type-rule_data.rule_apps" class="anchored"><td class="def record field"><a href="#type-rule_data.rule_apps" class="anchor"></a><code><span>rule_apps : <span><a href="../Pos/index.html#type-t">Pos.t</a> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-rule_data.rule_domain" class="anchored"><td class="def record field"><a href="#type-rule_data.rule_domain" class="anchor"></a><code><span>rule_domain : <a href="#type-rule_domain">rule_domain</a>;</span></code></td></tr><tr id="type-rule_data.rule_chain" class="anchored"><td class="def record field"><a href="#type-rule_data.rule_chain" class="anchor"></a><code><span>rule_chain : <span><span>(string * <a href="#type-rule_domain">rule_domain</a>)</span> option</span>;</span></code></td></tr><tr id="type-rule_data.rule_vars" class="anchored"><td class="def record field"><a href="#type-rule_data.rule_vars" class="anchor"></a><code><span>rule_vars : <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-rule_data.rule_number" class="anchored"><td class="def record field"><a href="#type-rule_data.rule_number" class="anchor"></a><code><span>rule_number : <span><a href="#type-rov_id">rov_id</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-target_data" class="anchored"><a href="#type-target_data" class="anchor"></a><code><span><span class="keyword">type</span> target_data</span><span> = </span><span>{</span></code><table><tr id="type-target_data.target_name" class="anchored"><td class="def record field"><a href="#type-target_data.target_name" class="anchor"></a><code><span>target_name : <span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-target_data.target_file" class="anchored"><td class="def record field"><a href="#type-target_data.target_file" class="anchor"></a><code><span>target_file : <span>string option</span>;</span></code></td></tr><tr id="type-target_data.target_apps" class="anchored"><td class="def record field"><a href="#type-target_data.target_apps" class="anchor"></a><code><span>target_apps : <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr><tr id="type-target_data.target_tmp_vars" class="anchored"><td class="def record field"><a href="#type-target_data.target_tmp_vars" class="anchor"></a><code><span>target_tmp_vars : <span><span>(<a href="#type-variable">variable</a> * <a href="../Pos/index.html#type-t">Pos.t</a> * <span>int option</span>)</span> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-target_data.target_prog" class="anchored"><td class="def record field"><a href="#type-target_data.target_prog" class="anchor"></a><code><span>target_prog : <span><span><a href="#type-instruction">instruction</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-verif_domain_data" class="anchored"><a href="#type-verif_domain_data" class="anchor"></a><code><span><span class="keyword">type</span> verif_domain_data</span><span> = </span><span>{</span></code><table><tr id="type-verif_domain_data.vdom_auth" class="anchored"><td class="def record field"><a href="#type-verif_domain_data.vdom_auth" class="anchor"></a><code><span>vdom_auth : <a href="CatVarSet/index.html#type-t">CatVarSet.t</a>;</span></code></td></tr><tr id="type-verif_domain_data.vdom_verifiable" class="anchored"><td class="def record field"><a href="#type-verif_domain_data.vdom_verifiable" class="anchor"></a><code><span>vdom_verifiable : bool;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-verif_domain" class="anchored"><a href="#type-verif_domain" class="anchor"></a><code><span><span class="keyword">type</span> verif_domain</span><span> = <span><a href="#type-verif_domain_data">verif_domain_data</a> <a href="#type-domain">domain</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-condition_data_" class="anchored"><a href="#type-condition_data_" class="anchor"></a><code><span><span class="keyword">type</span> <span>'variable condition_data_</span></span><span> = </span><span>{</span></code><table><tr id="type-condition_data_.cond_seq_id" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_seq_id" class="anchor"></a><code><span>cond_seq_id : int;</span></code></td></tr><tr id="type-condition_data_.cond_number" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_number" class="anchor"></a><code><span>cond_number : <span><a href="#type-rov_id">rov_id</a> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-condition_data_.cond_domain" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_domain" class="anchor"></a><code><span>cond_domain : <a href="#type-verif_domain">verif_domain</a>;</span></code></td></tr><tr id="type-condition_data_.cond_expr" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_expr" class="anchor"></a><code><span>cond_expr : <span><span><span class="type-var">'variable</span> <a href="#type-expression_">expression_</a></span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span>;</span></code></td></tr><tr id="type-condition_data_.cond_error" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_error" class="anchor"></a><code><span>cond_error : <a href="#type-error">error</a> * <span><span class="type-var">'variable</span> option</span>;</span></code></td></tr><tr id="type-condition_data_.cond_cats" class="anchored"><td class="def record field"><a href="#type-condition_data_.cond_cats" class="anchor"></a><code><span>cond_cats : <span>int <a href="CatVarMap/index.html#type-t">CatVarMap.t</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-condition_data" class="anchored"><a href="#type-condition_data" class="anchor"></a><code><span><span class="keyword">type</span> condition_data</span><span> = <span><a href="#type-variable">variable</a> <a href="#type-condition_data_">condition_data_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-idmap" class="anchored"><a href="#type-idmap" class="anchor"></a><code><span><span class="keyword">type</span> idmap</span><span> = <span><a href="#type-variable">variable</a> <a href="../Pos/VarNameToID/index.html#type-t">Pos.VarNameToID.t</a></span></span></code></div><div class="spec-doc"><p>We translate string variables into first-class unique <a href="#type-variable"><code>Mir.variable</code></a>, so we need to keep a mapping between the two. A name is mapped to a list of variables because variables can be redefined in different rules</p></div></div><div class="odoc-spec"><div class="spec type" id="type-program" class="anchored"><a href="#type-program" class="anchor"></a><code><span><span class="keyword">type</span> program</span><span> = </span><span>{</span></code><table><tr id="type-program.program_safe_prefix" class="anchored"><td class="def record field"><a href="#type-program.program_safe_prefix" class="anchor"></a><code><span>program_safe_prefix : string;</span></code></td></tr><tr id="type-program.program_applications" class="anchored"><td class="def record field"><a href="#type-program.program_applications" class="anchor"></a><code><span>program_applications : <span><a href="../Pos/index.html#type-t">Pos.t</a> <a href="../StrMap/index.html#type-t">StrMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_var_categories" class="anchored"><td class="def record field"><a href="#type-program.program_var_categories" class="anchor"></a><code><span>program_var_categories : <span><a href="#type-cat_variable_data">cat_variable_data</a> <a href="CatVarMap/index.html#type-t">CatVarMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_rule_domains" class="anchored"><td class="def record field"><a href="#type-program.program_rule_domains" class="anchor"></a><code><span>program_rule_domains : <span><a href="#type-rule_domain">rule_domain</a> <a href="../StrSetMap/index.html#type-t">Mast.DomainIdMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_verif_domains" class="anchored"><td class="def record field"><a href="#type-program.program_verif_domains" class="anchor"></a><code><span>program_verif_domains : <span><a href="#type-verif_domain">verif_domain</a> <a href="../StrSetMap/index.html#type-t">Mast.DomainIdMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_chainings" class="anchored"><td class="def record field"><a href="#type-program.program_chainings" class="anchor"></a><code><span>program_chainings : <span><a href="#type-rule_domain">rule_domain</a> <a href="../StrMap/index.html#type-t">Mast.ChainingMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_vars" class="anchored"><td class="def record field"><a href="#type-program.program_vars" class="anchor"></a><code><span>program_vars : <a href="VariableDict/index.html#type-t">VariableDict.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A static register of all variables that can be used during a calculation</p><span class="comment-delim">*)</span></td></tr><tr id="type-program.program_targets" class="anchored"><td class="def record field"><a href="#type-program.program_targets" class="anchor"></a><code><span>program_targets : <span><a href="#type-target_data">target_data</a> <a href="TargetMap/index.html#type-t">TargetMap.t</a></span>;</span></code></td></tr><tr id="type-program.program_idmap" class="anchored"><td class="def record field"><a href="#type-program.program_idmap" class="anchor"></a><code><span>program_idmap : <a href="#type-idmap">idmap</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Variable" class="anchored"><a href="#module-Variable" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Variable/index.html">Variable</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-LocalVariable" class="anchored"><a href="#module-LocalVariable" class="anchor"></a><code><span><span class="keyword">module</span> <a href="LocalVariable/index.html">LocalVariable</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Local variables don't appear in the M source program but can be introduced by let bindings when translating to MIR. They should be De Bruijn indices but instead are unique globals identifiers out of laziness.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-false_literal" class="anchored"><a href="#val-false_literal" class="anchor"></a><code><span><span class="keyword">val</span> false_literal : <a href="#type-literal">literal</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-true_literal" class="anchored"><a href="#val-true_literal" class="anchor"></a><code><span><span class="keyword">val</span> true_literal : <a href="#type-literal">literal</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-num_of_rule_or_verif_id" class="anchored"><a href="#val-num_of_rule_or_verif_id" class="anchor"></a><code><span><span class="keyword">val</span> num_of_rule_or_verif_id : <span><a href="#type-rov_id">rov_id</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-find_var_name_by_alias" class="anchored"><a href="#val-find_var_name_by_alias" class="anchor"></a><code><span><span class="keyword">val</span> find_var_name_by_alias : <span><a href="#type-program">program</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_expr_var" class="anchored"><a href="#val-map_expr_var" class="anchor"></a><code><span><span class="keyword">val</span> map_expr_var : <span><span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="#type-expression_">expression_</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> <a href="#type-expression_">expression_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fold_expr_var" class="anchored"><a href="#val-fold_expr_var" class="anchor"></a><code><span><span class="keyword">val</span> fold_expr_var : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="#type-expression_">expression_</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_var_def_var" class="anchored"><a href="#val-map_var_def_var" class="anchor"></a><code><span><span class="keyword">val</span> map_var_def_var : <span><span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="#type-variable_def_">variable_def_</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v2</span> <a href="#type-variable_def_">variable_def_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_cond_data_var" class="anchored"><a href="#val-map_cond_data_var" class="anchor"></a><code><span><span class="keyword">val</span> map_cond_data_var : 
  <span><span>( <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'v</span> <a href="#type-condition_data_">condition_data_</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'v2</span> <a href="#type-condition_data_">condition_data_</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cond_cats_to_set" class="anchored"><a href="#val-cond_cats_to_set" class="anchor"></a><code><span><span class="keyword">val</span> cond_cats_to_set : <span><span>int <a href="CatVarMap/index.html#type-t">CatVarMap.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="CatVarSet/index.html#type-t">CatVarSet.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-find_var_definition" class="anchored"><a href="#val-find_var_definition" class="anchor"></a><code><span><span class="keyword">val</span> find_var_definition : <span><a href="#type-program">program</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-variable">variable</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-rule_data">rule_data</a> * <a href="#type-variable_data">variable_data</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_var" class="anchored"><a href="#val-get_var" class="anchor"></a><code><span><span class="keyword">val</span> get_var : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="Variable/index.html#type-t">Variable.t</a> <a href="../Pos/VarNameToID/index.html#type-t">Pos.VarNameToID.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="Variable/index.html#type-t">Variable.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-fresh_rule_num" class="anchored"><a href="#val-fresh_rule_num" class="anchor"></a><code><span><span class="keyword">val</span> fresh_rule_num : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-initial_undef_rule_id" class="anchored"><a href="#val-initial_undef_rule_id" class="anchor"></a><code><span><span class="keyword">val</span> initial_undef_rule_id : <a href="#type-rov_id">rov_id</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-find_var_by_name" class="anchored"><a href="#val-find_var_by_name" class="anchor"></a><code><span><span class="keyword">val</span> find_var_by_name : <span><a href="#type-program">program</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-variable">variable</a></span></code></div><div class="spec-doc"><p>Get a variable for a given name or alias, because of SSA multiple variables share a name or alias. If an alias is provided, the variable returned is that with the lowest execution number. When a name is provided, then the variable with the highest execution number is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mast_to_catvar" class="anchored"><a href="#val-mast_to_catvar" class="anchor"></a><code><span><span class="keyword">val</span> mast_to_catvar : 
  <span><span><span class="type-var">'a</span> <a href="CatVarMap/index.html#type-t">CatVarMap.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>string <a href="../Pos/index.html#type-marked">Pos.marked</a></span> list</span> <a href="../Pos/index.html#type-marked">Pos.marked</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-cat_variable">cat_variable</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-expand_functions" class="anchored"><a href="#val-expand_functions" class="anchor"></a><code><span><span class="keyword">val</span> expand_functions : <span><a href="#type-program">program</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-program">program</a></span></code></div><div class="spec-doc"><p>Calls <code>expand_functions_expr</code> on the whole program</p></div></div></div></body></html>