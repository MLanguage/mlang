<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mlang__Bir_interpreter (mlang.Mlang__Bir_interpreter)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">mlang</a> &#x00BB; Mlang__Bir_interpreter</nav><h1>Module <code>Mlang__Bir_interpreter</code></h1><p>Interpretation of BIR programs</p><nav class="toc"><ul><li><a href="#program-values">Program values</a></li><li><a href="#instrumentation-of-he-interpreter">Instrumentation of he interpreter</a></li><li><a href="#the-interpreter-functor">The interpreter functor</a></li><li><a href="#generic-interpretation-api">Generic interpretation API</a></li></ul></nav></header><section><header><h2 id="program-values"><a href="#program-values" class="anchor"></a>Program values</h2></header><dl><dt class="spec type" id="type-var_literal"><a href="#type-var_literal" class="anchor"></a><code><span class="keyword">type</span> var_literal</code><code> = </code><table class="variant"><tr id="type-var_literal.SimpleVar" class="anchored"><td class="def constructor"><a href="#type-var_literal.SimpleVar" class="anchor"></a><code>| </code><code><span class="constructor">SimpleVar</span> <span class="keyword">of</span> <a href="../Mlang/Mir/index.html#type-literal">Mlang.Mir.literal</a></code></td></tr><tr id="type-var_literal.TableVar" class="anchored"><td class="def constructor"><a href="#type-var_literal.TableVar" class="anchor"></a><code>| </code><code><span class="constructor">TableVar</span> <span class="keyword">of</span> int * <span><a href="../Mlang/Mir/index.html#type-literal">Mlang.Mir.literal</a> array</span></code></td></tr></table></dt></dl></section><section><header><h2 id="instrumentation-of-he-interpreter"><a href="#instrumentation-of-he-interpreter" class="anchor"></a>Instrumentation of he interpreter</h2></header><aside><p>The BIR interpreter can be instrumented to record which program locations have been executed.</p></aside><dl><dt class="spec type" id="type-code_location_segment"><a href="#type-code_location_segment" class="anchor"></a><code><span class="keyword">type</span> code_location_segment</code><code> = </code><table class="variant"><tr id="type-code_location_segment.InsideBlock" class="anchored"><td class="def constructor"><a href="#type-code_location_segment.InsideBlock" class="anchor"></a><code>| </code><code><span class="constructor">InsideBlock</span> <span class="keyword">of</span> int</code></td></tr><tr id="type-code_location_segment.ConditionalBranch" class="anchored"><td class="def constructor"><a href="#type-code_location_segment.ConditionalBranch" class="anchor"></a><code>| </code><code><span class="constructor">ConditionalBranch</span> <span class="keyword">of</span> bool</code></td></tr><tr id="type-code_location_segment.InsideRule" class="anchored"><td class="def constructor"><a href="#type-code_location_segment.InsideRule" class="anchor"></a><code>| </code><code><span class="constructor">InsideRule</span> <span class="keyword">of</span> <a href="../Mlang/Bir/index.html#type-rule_id">Mlang.Bir.rule_id</a></code></td></tr><tr id="type-code_location_segment.InsideFunction" class="anchored"><td class="def constructor"><a href="#type-code_location_segment.InsideFunction" class="anchor"></a><code>| </code><code><span class="constructor">InsideFunction</span> <span class="keyword">of</span> <a href="../Mlang/Bir/index.html#type-function_name">Mlang.Bir.function_name</a></code></td></tr></table></dt><dd><p>Representation of each program location segment</p></dd></dl><dl><dt class="spec value" id="val-format_code_location_segment"><a href="#val-format_code_location_segment" class="anchor"></a><code><span class="keyword">val</span> format_code_location_segment : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-code_location_segment">code_location_segment</a> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec type" id="type-code_location"><a href="#type-code_location" class="anchor"></a><code><span class="keyword">type</span> code_location</code><code> = <span><a href="index.html#type-code_location_segment">code_location_segment</a> list</span></code></dt><dd><p>A program location is simply the path inside the program</p></dd></dl><dl><dt class="spec value" id="val-format_code_location"><a href="#val-format_code_location" class="anchor"></a><code><span class="keyword">val</span> format_code_location : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-code_location">code_location</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-assign_hook"><a href="#val-assign_hook" class="anchor"></a><code><span class="keyword">val</span> assign_hook : <span><span>(<a href="../Mlang/Bir/index.html#type-variable">Mlang.Bir.variable</a> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <a href="index.html#type-var_literal">var_literal</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-code_location">code_location</a> <span>&#45;&gt;</span> unit)</span> Stdlib.ref</span></code></dt><dd><p>The instrumentation of the interpreter is done through this reference. The function that you assign to this reference will be called each time a variable assignment is executed</p></dd></dl><dl><dt class="spec value" id="val-exit_on_rte"><a href="#val-exit_on_rte" class="anchor"></a><code><span class="keyword">val</span> exit_on_rte : <span>bool Stdlib.ref</span></code></dt><dd><p>If set to true, the interpreter exits the whole process in case of runtime error</p></dd></dl><dl><dt class="spec value" id="val-repl_debug"><a href="#val-repl_debug" class="anchor"></a><code><span class="keyword">val</span> repl_debug : <span>bool Stdlib.ref</span></code></dt><dd><p>If set to true, prints the REPL debugger in case of runtime error</p></dd></dl></section><section><header><h2 id="the-interpreter-functor"><a href="#the-interpreter-functor" class="anchor"></a>The interpreter functor</h2></header><aside><p>The intepreter is parametrized by the kind of floating-point values used for the execution</p></aside><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Signature of the modules produced by the functor</p></dd></dl><div class="spec module" id="module-RegularFloatInterpreter"><a href="#module-RegularFloatInterpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="RegularFloatInterpreter/index.html">RegularFloatInterpreter</a> : <a href="index.html#module-type-S">S</a></code></div><div class="spec module" id="module-MPFRInterpreter"><a href="#module-MPFRInterpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="MPFRInterpreter/index.html">MPFRInterpreter</a> : <a href="index.html#module-type-S">S</a></code></div><div class="spec module" id="module-BigIntInterpreter"><a href="#module-BigIntInterpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="BigIntInterpreter/index.html">BigIntInterpreter</a> : <a href="index.html#module-type-S">S</a></code></div><div class="spec module" id="module-IntervalInterpreter"><a href="#module-IntervalInterpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="IntervalInterpreter/index.html">IntervalInterpreter</a> : <a href="index.html#module-type-S">S</a></code></div><div class="spec module" id="module-RationalInterpreter"><a href="#module-RationalInterpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="RationalInterpreter/index.html">RationalInterpreter</a> : <a href="index.html#module-type-S">S</a></code></div></section><section><header><h2 id="generic-interpretation-api"><a href="#generic-interpretation-api" class="anchor"></a>Generic interpretation API</h2></header><dl><dt class="spec type" id="type-value_sort"><a href="#type-value_sort" class="anchor"></a><code><span class="keyword">type</span> value_sort</code><code> = </code><table class="variant"><tr id="type-value_sort.RegularFloat" class="anchored"><td class="def constructor"><a href="#type-value_sort.RegularFloat" class="anchor"></a><code>| </code><code><span class="constructor">RegularFloat</span></code></td></tr><tr id="type-value_sort.MPFR" class="anchored"><td class="def constructor"><a href="#type-value_sort.MPFR" class="anchor"></a><code>| </code><code><span class="constructor">MPFR</span> <span class="keyword">of</span> int</code></td><td class="doc"><p>bitsize of the floats</p></td></tr><tr id="type-value_sort.BigInt" class="anchored"><td class="def constructor"><a href="#type-value_sort.BigInt" class="anchor"></a><code>| </code><code><span class="constructor">BigInt</span> <span class="keyword">of</span> int</code></td><td class="doc"><p>precision of the fixed point</p></td></tr><tr id="type-value_sort.Interval" class="anchored"><td class="def constructor"><a href="#type-value_sort.Interval" class="anchor"></a><code>| </code><code><span class="constructor">Interval</span></code></td></tr><tr id="type-value_sort.Rational" class="anchored"><td class="def constructor"><a href="#type-value_sort.Rational" class="anchor"></a><code>| </code><code><span class="constructor">Rational</span></code></td></tr></table></dt><dd><p>According on the <code>value_sort</code>, a specific interpreter will be called with the right kind of floating-point value</p></dd></dl><dl><dt class="spec value" id="val-evaluate_program"><a href="#val-evaluate_program" class="anchor"></a><code><span class="keyword">val</span> evaluate_program : <a href="../Mlang/Bir_interface/index.html#type-bir_function">Mlang.Bir_interface.bir_function</a> <span>&#45;&gt;</span> <a href="../Mlang/Bir/index.html#type-program">Mlang.Bir.program</a> <span>&#45;&gt;</span> <span><a href="../Mlang/Mir/index.html#type-literal">Mlang.Mir.literal</a> <a href="../Mlang__Bir/index.html#module-VariableMap">Mlang.Bir.VariableMap</a>.t</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-value_sort">value_sort</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Main interpreter function</p></dd></dl><dl><dt class="spec value" id="val-evaluate_expr"><a href="#val-evaluate_expr" class="anchor"></a><code><span class="keyword">val</span> evaluate_expr : <a href="../Mlang/Mir/index.html#type-program">Mlang.Mir.program</a> <span>&#45;&gt;</span> <span><a href="../Mlang/Bir/index.html#type-expression">Mlang.Bir.expression</a> <a href="../Mlang/Pos/index.html#type-marked">Mlang.Pos.marked</a></span> <span>&#45;&gt;</span> <a href="index.html#type-value_sort">value_sort</a> <span>&#45;&gt;</span> <a href="../Mlang/Mir/index.html#type-literal">Mlang.Mir.literal</a></code></dt><dd><p>Interprets only an expression</p></dd></dl></section></div></body></html>